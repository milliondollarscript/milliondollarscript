jQuery(document).ready(function(i){var{select:e,dispatch:t}=window.cf.vendor["@wordpress/data"],e=e("carbon-fields/metaboxes");let a=t("carbon-fields/metaboxes").updateFieldValue,r=e.getFields();if(window.tinymce){let s=window.tinymce.Editor.prototype.execCommand;window.tinymce.Editor.prototype.execCommand=function(e,t,n,o){try{return this.getElement()&&this.getElement().offsetParent?s.call(this,e,t,n,o):!1}catch(e){return console.warn("TinyMCE execCommand error prevented:",e),!1}}}let d=i('input[name="_mds_theme_mode"]:checked').val();i('input[name="_mds_theme_mode"]').on("change",function(){var t,n,e=i(this).val(),o=d;{function s(){n.prop("checked",!0);var e=d=t;e=i('<div class="notice notice-info mds-theme-processing"><p><strong>Processing theme change...</strong> Applying '+t+" mode colors and regenerating styles.</p></div>"),i(".wrap h1").after(e),setTimeout(function(){i(".mds-theme-processing").fadeOut()},3e3),setTimeout(function(){i("#submit").trigger("click")},100)}e!==o&&(o=o,t=e,n=i(this),i('input[name="_mds_theme_mode"][value="'+o+'"]').prop("checked",!0),o="You are switching from "+o+" to "+t+" mode.\nYour current settings will be backed up.\n\nContinue?","undefined"!=typeof MDSModalUtility?MDSModalUtility.showConfirmation("Switch Theme Mode?",o,s):confirm("Switch Theme Mode?\n\n"+o)&&s())}}),i("#mds-theme-admin-styles").length||i("head").append(`
			<style id="mds-theme-admin-styles">
				.mds-theme-processing {
					animation: pulse 1.5s infinite;
				}
				@keyframes pulse {
					0%, 100% { opacity: 1; }
					50% { opacity: 0.7; }
				}
				
				/* Admin Button States with CSS Variables */
				.mds-admin-button-processing {
					background-color: var(--mds-accessible-warning, #f59e0b) !important;
					color: #ffffff !important;
				}
				
				.mds-admin-button-success {
					background-color: var(--mds-accessible-success, #10b981) !important;
					color: #ffffff !important;
				}
				
				.mds-admin-button-error {
					background-color: var(--mds-accessible-error, #ef4444) !important;
					color: #ffffff !important;
				}
				
				.mds-admin-button-reset {
					background-color: '' !important;
					color: '' !important;
				}
				
				/* Row Highlighting */
				.mds-highlight-row {
					background-color: var(--mds-accessible-warning, #fef3c7) !important;
					color: var(--mds-text-primary, #000) !important;
				}
			</style>
		`);let o=["update_language","create_pages","delete_pages"];for(let n=0;n<o.length;n++)i("#mds_"+o[n]).on("click",function(e){e.preventDefault(),e.stopPropagation();let t=i(this);t.prop("disabled",!0),t.removeClass("mds-admin-button-success mds-admin-button-error").addClass("mds-admin-button-processing"),i.post(MDS.ajaxurl,{action:"mds_"+o[n],nonce:MDS.nonce},function(e){if(t.prop("disabled",!1),t.removeClass("mds-admin-button-processing"),e?t.addClass("mds-admin-button-success"):t.addClass("mds-admin-button-error"),setTimeout(function(){t.removeClass("mds-admin-button-success mds-admin-button-error mds-admin-button-processing")},5e3),"mds_create_pages"===t.attr("id")||"mds_delete_pages"===t.attr("id")){var n,o=JSON.parse(MDS.pages);for(n in o){let t=o[n].option;var s=Object.values(r).find(e=>e.base_name===MDS.MDS_PREFIX+t);a(s.id,e[t])}}})})});