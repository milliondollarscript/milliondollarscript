document.getElementById("mds-spinner-style")||document.head.insertAdjacentHTML("beforeend",`
		<style id="mds-spinner-style">
		.mds-error {
			border-color: #e00 !important;
			box-shadow: 0 0 0 2px #fbb !important;
		}
		.mds-tooltip {
			position: absolute !important;
			background: #e00 !important;
			color: #fff !important;
			padding: 2px 8px !important;
			border-radius: 3px !important;
			font-size: 12px !important;
			z-index: 9999 !important;
			margin-top: 2px !important;
			white-space: nowrap !important;
		}
		.mds-spinner-wrapper {
			position: relative !important;
			display: inline-block !important;
			vertical-align: middle !important;
		}
		.mds-loading {
			padding-right: 26px !important;
		}
		.mds-spinner {
			position: absolute !important;
			top: 50% !important;
			right: 8px !important;
			width: 18px !important;
			height: 18px !important;
			transform: translateY(-50%) !important;
			z-index: 999 !important;
			pointer-events: none !important;
			display: block !important;
		}
		.mds-spinner svg {
			animation: mds-spin 0.8s linear infinite;
			display: block !important;
			width: 100% !important;
			height: 100% !important;
		}
		.mds-spinner svg path {
			stroke: #888 !important;
		}
		@keyframes mds-spin {
			100% { transform: rotate(360deg); }
		}
		</style>
	`),jQuery(document).ready(function(r){let a=null,l=null;function i(){if(MDS.page_config&&MDS.page_config.is_mds_page){console.log("MDS: Initializing page configuration from",MDS.page_config.source);let e=MDS.page_config.configuration;setTimeout(function(){var t;e.id&&(t=r('input[name="'+MDS.MDS_PREFIX+'id"]')).length&&!t.val()&&t.val(e.id),e.type&&(t=r('select[name="'+MDS.MDS_PREFIX+'type"]')).length&&!t.val()&&t.val(e.type),e.width&&(t=r('input[name="'+MDS.MDS_PREFIX+'width"]')).length&&!t.val()&&t.val(e.width),e.height&&(t=r('input[name="'+MDS.MDS_PREFIX+'height"]')).length&&!t.val()&&t.val(e.height),e.align&&(t=r('select[name="'+MDS.MDS_PREFIX+'align"]')).length&&!t.val()&&t.val(e.align),console.log("MDS: Page configuration initialized")},500)}}if(i(),wp&&wp.data){let e=0;wp.data.subscribe(function(){var t=wp.data.select("core/block-editor").getBlocks();t.length>e&&(e=t.length,setTimeout(i,100))})}function n(){var t=a.closest(".cf-block__fields");let i=t.find(r('input[name="'+MDS.MDS_PREFIX+'id"]')),n=t.find(r('input[name="'+MDS.MDS_PREFIX+'width"]')),o=t.find(r('input[name="'+MDS.MDS_PREFIX+'height"]'));var t=t.find(r('select[name="'+MDS.MDS_PREFIX+'type"]')),e=MDS.page_config&&MDS.page_config.configuration?MDS.page_config.configuration:{},t={id:i.val()||e.id||"1",type:t.val()||e.type||"grid",width:n.val()||e.width||"1000px",height:o.val()||e.height||"1000px"};let s=wp.data.select("core/block-editor").getSelectedBlock();l&&4!==l.readyState&&l.abort(),n.each(function(){var t=r(this);t.parent().hasClass("mds-spinner-wrapper")||t.wrap('<span class="mds-spinner-wrapper"></span>'),t.addClass("mds-loading").data("oldval",t.val()),0===t.siblings(".mds-spinner").length&&t.after('<span class="mds-spinner"><svg viewBox="0 0 38 38"><defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="#fff" stop-opacity="0" offset="0%"/><stop stop-color="#fff" stop-opacity=".631" offset="63.146%"/><stop stop-color="#fff" offset="100%"/></linearGradient></defs><g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke="#ccc" stroke-opacity=".5" cx="18" cy="18" r="18"/><path d="M36 18c0-9.94-8.06-18-18-18" stroke="#888" stroke-opacity="1"></path></g></g></svg></span>')}),o.each(function(){var t=r(this);t.parent().hasClass("mds-spinner-wrapper")||t.wrap('<span class="mds-spinner-wrapper"></span>'),t.addClass("mds-loading").data("oldval",t.val()),0===t.siblings(".mds-spinner").length&&t.after('<span class="mds-spinner"><svg viewBox="0 0 38 38"><defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="#fff" stop-opacity="0" offset="0%"/><stop stop-color="#fff" stop-opacity=".631" offset="63.146%"/><stop stop-color="#fff" offset="100%"/></linearGradient></defs><g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke="#ccc" stroke-opacity=".5" cx="18" cy="18" r="18"/><path d="M36 18c0-9.94-8.06-18-18-18" stroke="#888" stroke-opacity="1"></path></g></g></svg></span>')}),l=jQuery.ajax({url:MDS.ajaxurl,data:{action:"mds_admin_ajax",payload:t,mds_admin_ajax_nonce:MDS.mds_admin_ajax_nonce},type:"POST",dataType:"json",success:function(t){if(r(".mds-tooltip").remove(),i.removeClass("mds-error"),t.success){var e=MDS.MDS_PREFIX+"width",a=MDS.MDS_PREFIX+"height";s.attributes.data[e]=t.data.width,s.attributes.data[a]=t.data.height,wp.data.dispatch("core/block-editor").updateBlock(s.clientId,{attributes:s.attributes}),n.val(t.data.width),o.val(t.data.height)}else if("Grid not found."===t.data){i.addClass("mds-error");e=i.offset();let t=r('<div class="mds-tooltip">Grid not found.</div>');r("body").append(t);a=i.outerHeight();t.css({left:e.left,top:e.top+a+2}),setTimeout(function(){t.fadeOut(200,function(){r(this).remove()}),i.removeClass("mds-error")},2500)}},complete:function(){n.removeClass("mds-loading").siblings(".mds-spinner").remove(),o.removeClass("mds-loading").siblings(".mds-spinner").remove()},error:function(t,e){"abort"===e&&(n.val(n.data("oldval")).removeClass("mds-loading").siblings(".mds-spinner").remove(),o.val(o.data("oldval")).removeClass("mds-loading").siblings(".mds-spinner").remove())}})}r(document).on("change",'select[name="milliondollarscript_type"]',function(){a=jQuery(this);var t,e=wp.data.select("core/block-editor").getSelectedBlock();e&&e.attributes&&e.attributes.data&&(t=MDS.MDS_PREFIX+"type",e.attributes.data[t]=a.val(),wp.data.dispatch("core/block-editor").updateBlock(e.clientId,{attributes:e.attributes})),n()});let t=null;r(document).on("change input",'input[name="milliondollarscript_id"]',function(){a=jQuery(this),r(this).removeClass("mds-error"),r(".mds-tooltip").remove(),clearTimeout(t),t=setTimeout(function(){n()},1e3)})});