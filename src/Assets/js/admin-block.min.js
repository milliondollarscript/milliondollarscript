document.getElementById("mds-spinner-style")||document.head.insertAdjacentHTML("beforeend",'\n\t\t<style id="mds-spinner-style">\n\t\t.mds-error {\n\t\t\tborder-color: #e00 !important;\n\t\t\tbox-shadow: 0 0 0 2px #fbb !important;\n\t\t}\n\t\t.mds-tooltip {\n\t\t\tposition: absolute !important;\n\t\t\tbackground: #e00 !important;\n\t\t\tcolor: #fff !important;\n\t\t\tpadding: 2px 8px !important;\n\t\t\tborder-radius: 3px !important;\n\t\t\tfont-size: 12px !important;\n\t\t\tz-index: 9999 !important;\n\t\t\tmargin-top: 2px !important;\n\t\t\twhite-space: nowrap !important;\n\t\t}\n\t\t.mds-spinner-wrapper {\n\t\t\tposition: relative !important;\n\t\t\tdisplay: inline-block !important;\n\t\t\tvertical-align: middle !important;\n\t\t}\n\t\t.mds-loading {\n\t\t\tpadding-right: 26px !important;\n\t\t}\n\t\t.mds-spinner {\n\t\t\tposition: absolute !important;\n\t\t\ttop: 50% !important;\n\t\t\tright: 8px !important;\n\t\t\twidth: 18px !important;\n\t\t\theight: 18px !important;\n\t\t\ttransform: translateY(-50%) !important;\n\t\t\tz-index: 999 !important;\n\t\t\tpointer-events: none !important;\n\t\t\tdisplay: block !important;\n\t\t}\n\t\t.mds-spinner svg {\n\t\t\tanimation: mds-spin 0.8s linear infinite;\n\t\t\tdisplay: block !important;\n\t\t\twidth: 100% !important;\n\t\t\theight: 100% !important;\n\t\t}\n\t\t.mds-spinner svg path {\n\t\t\tstroke: #888 !important;\n\t\t}\n\t\t@keyframes mds-spin {\n\t\t\t100% { transform: rotate(360deg); }\n\t\t}\n\t\t</style>\n\t'),jQuery(document).ready((function(t){let n=null,e=null;function a(){if(MDS.page_config&&MDS.page_config.is_mds_page){console.log("MDS: Initializing page configuration from",MDS.page_config.source);const n=MDS.page_config.configuration;setTimeout((function(){if(n.id){const e=t('input[name="'+MDS.MDS_PREFIX+'id"]');e.length&&!e.val()&&e.val(n.id)}if(n.type){const e=t('select[name="'+MDS.MDS_PREFIX+'type"]');e.length&&!e.val()&&e.val(n.type)}if(n.width){const e=t('input[name="'+MDS.MDS_PREFIX+'width"]');e.length&&!e.val()&&e.val(n.width)}if(n.height){const e=t('input[name="'+MDS.MDS_PREFIX+'height"]');e.length&&!e.val()&&e.val(n.height)}if(n.align){const e=t('select[name="'+MDS.MDS_PREFIX+'align"]');e.length&&!e.val()&&e.val(n.align)}console.log("MDS: Page configuration initialized")}),500)}}if(a(),wp&&wp.data){let t=0;wp.data.subscribe((function(){const n=wp.data.select("core/block-editor").getBlocks();n.length>t&&(t=n.length,setTimeout(a,100))}))}function i(){const a=n.closest(".cf-block__fields"),i=a.find(t('input[name="'+MDS.MDS_PREFIX+'id"]')),o=a.find(t('input[name="'+MDS.MDS_PREFIX+'width"]')),s=a.find(t('input[name="'+MDS.MDS_PREFIX+'height"]')),r=a.find(t('select[name="'+MDS.MDS_PREFIX+'type"]')),d=MDS.page_config&&MDS.page_config.configuration?MDS.page_config.configuration:{};let l={id:i.val()||d.id||"1",type:r.val()||d.type||"grid",width:o.val()||d.width||"1000px",height:s.val()||d.height||"1000px"};const p=wp.data.select("core/block-editor").getSelectedBlock();e&&4!==e.readyState&&e.abort(),o.each((function(){var n=t(this);n.parent().hasClass("mds-spinner-wrapper")||n.wrap('<span class="mds-spinner-wrapper"></span>'),n.addClass("mds-loading").data("oldval",n.val()),0===n.siblings(".mds-spinner").length&&n.after('<span class="mds-spinner"><svg viewBox="0 0 38 38"><defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="#fff" stop-opacity="0" offset="0%"/><stop stop-color="#fff" stop-opacity=".631" offset="63.146%"/><stop stop-color="#fff" offset="100%"/></linearGradient></defs><g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke="#ccc" stroke-opacity=".5" cx="18" cy="18" r="18"/><path d="M36 18c0-9.94-8.06-18-18-18" stroke="#888" stroke-opacity="1"></path></g></g></svg></span>')})),s.each((function(){var n=t(this);n.parent().hasClass("mds-spinner-wrapper")||n.wrap('<span class="mds-spinner-wrapper"></span>'),n.addClass("mds-loading").data("oldval",n.val()),0===n.siblings(".mds-spinner").length&&n.after('<span class="mds-spinner"><svg viewBox="0 0 38 38"><defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="#fff" stop-opacity="0" offset="0%"/><stop stop-color="#fff" stop-opacity=".631" offset="63.146%"/><stop stop-color="#fff" offset="100%"/></linearGradient></defs><g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke="#ccc" stroke-opacity=".5" cx="18" cy="18" r="18"/><path d="M36 18c0-9.94-8.06-18-18-18" stroke="#888" stroke-opacity="1"></path></g></g></svg></span>')})),e=jQuery.ajax({url:MDS.ajaxurl,data:{action:"mds_admin_ajax",payload:l,mds_admin_ajax_nonce:MDS.mds_admin_ajax_nonce},type:"POST",dataType:"json",success:function(n){if(t(".mds-tooltip").remove(),i.removeClass("mds-error"),n.success){const t=MDS.MDS_PREFIX+"width",e=MDS.MDS_PREFIX+"height";p.attributes.data[t]=n.data.width,p.attributes.data[e]=n.data.height,wp.data.dispatch("core/block-editor").updateBlock(p.clientId,{attributes:p.attributes}),o.val(n.data.width),s.val(n.data.height)}else if("Grid not found."===n.data){i.addClass("mds-error");const n=i.offset(),e=t('<div class="mds-tooltip">Grid not found.</div>');t("body").append(e);const a=i.outerHeight();e.css({left:n.left,top:n.top+a+2}),setTimeout((function(){e.fadeOut(200,(function(){t(this).remove()})),i.removeClass("mds-error")}),2500)}},complete:function(){o.removeClass("mds-loading").siblings(".mds-spinner").remove(),s.removeClass("mds-loading").siblings(".mds-spinner").remove()},error:function(t,n){"abort"===n&&(o.val(o.data("oldval")).removeClass("mds-loading").siblings(".mds-spinner").remove(),s.val(s.data("oldval")).removeClass("mds-loading").siblings(".mds-spinner").remove())}})}t(document).on("change",'select[name="milliondollarscript_type"]',(function(){n=jQuery(this);const t=wp.data.select("core/block-editor").getSelectedBlock();if(t&&t.attributes&&t.attributes.data){const e=MDS.MDS_PREFIX+"type";t.attributes.data[e]=n.val(),wp.data.dispatch("core/block-editor").updateBlock(t.clientId,{attributes:t.attributes})}i()}));let o=null;t(document).on("change input",'input[name="milliondollarscript_id"]',(function(){n=jQuery(this),t(this).removeClass("mds-error"),t(".mds-tooltip").remove(),clearTimeout(o),o=setTimeout((function(){i()}),1e3)}))}));