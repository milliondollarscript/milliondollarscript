!function(e){const t=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.ajax_url?String(MDS_EXTENSIONS_DATA.ajax_url):"string"==typeof window.ajaxurl?window.ajaxurl:"",n=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.text||{};e((function(){"use strict";function a(t,n,a=!0){const s="error"===t?"notice-error":"warning"===t?"notice-warning":"notice-success",i=`\n\t\t\t<div class="notice ${s} is-dismissible mds-enhanced-notice">\n\t\t\t\t<p><span class="mds-notice-icon">${"error"===t?"❌":"warning"===t?"⚠️":"✅"}</span> ${n}</p>\n\t\t\t\t<button type="button" class="notice-dismiss">\n\t\t\t\t\t<span class="screen-reader-text">Dismiss this notice.</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;e(".mds-enhanced-notice").remove();const o=e(i),c=e("#mds-extensions-notices");if(c.length)o.appendTo(c);else{const t=e("#mds-extensions-page .mds-extensions-container").first();t.length?o.insertBefore(t):o.prependTo(e("#wpbody-content").first())}o.show(),a&&"success"===t&&setTimeout((()=>{e(".mds-enhanced-notice.notice."+s).remove()}),5e3),e(document).off("click",".mds-enhanced-notice .notice-dismiss").on("click",".mds-enhanced-notice .notice-dismiss",(function(){e(this).closest(".mds-enhanced-notice").remove()}))}function s(e,t){e.data("original-html",e.html()),e.prop("disabled",!0).html(`<span class="spinner is-active"></span> ${t}`).addClass("mds-btn-loading")}function i(e,t=null){const n=t||e.data("original-html")||e.html();e.prop("disabled",!1).html(n).removeClass("mds-btn-loading")}function o(e,t,n){const a=e.hasClass("mds-extension-card")?e:e.closest(".mds-extension-card");if(!a.length)return;const s=a.find(".mds-card-update-panel");if(!s.length)return;const i="string"==typeof t?t.toLowerCase():"",o=["success","warning","error","info"].includes(i)?i:"info",c="string"==typeof n?n.trim():"",d=s.find(".mds-update-status").first();if(!c)return d.length&&d.remove(),void("true"!==s.data("has-update")&&0===s.children().length?s.removeAttr("data-status-variant").removeClass("mds-update-status-visible").empty():s.removeAttr("data-status-variant").removeClass("mds-update-status-visible"));const l=`<div class="mds-update-status is-${o}" role="status">${r(c)}</div>`;d.length?d.replaceWith(l):"true"===s.data("has-update")?s.prepend(l):s.html(l),s.attr("data-status-variant",o).addClass("mds-update-status-visible")}function c(e,t){if(n&&Object.prototype.hasOwnProperty.call(n,e)){const t=n[e];if("string"==typeof t&&""!==t)return t}return t}function r(t){return e("<div>").text(null==t?"":String(t)).html()}function d(e){if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){const t=e.trim().toLowerCase();return"true"===t||"1"===t||"yes"===t}return!!e}function l(e){const t=e.find(".mds-card-version-meta");if(!t.length)return;const n=String(e.data("installed-version")||"").trim(),a=String(e.data("available-version")||"").trim(),s=d(e.data("update-available")),i=n?`v${n}`:c("version_not_installed","Not installed"),o=a?`v${a}`:n?`v${n}`:c("version_unknown","Unknown");t.toggleClass("is-outdated",s),t.find(".mds-version-installed .mds-version-value").text(i),t.find(".mds-version-available .mds-version-value").text(o)}var u;function m(e){return d(e.data("purchased"))||d(e.data("purchasedLocally"))||d(e.data("hasLocalLicense"))}function p(e,t="",n=""){e&&e.length?(e.removeClass("is-error is-success"),t?("error"===n?e.addClass("is-error"):"success"===n&&e.addClass("is-success"),e.text(t)):e.text("")):t&&a("error"===n?"error":"success",t,"error"!==n)}function f(e,t){e&&e.length&&e.toggleClass("is-highlighted",!!t)}!function(){try{const t=e("#mds-extensions-notices"),n=e("#mds-extensions-page .mds-extensions-header .notice");if(n.length)if(t.length)n.detach().appendTo(t);else{const t=e("#mds-extensions-page .mds-extensions-container").first();t.length&&n.detach().insertBefore(t)}}catch(e){}}(),e(".mds-extension-card").each((function(){l(e(this))})),((u=e(".mds-extension-card"))&&u.length?u:e(".mds-extension-card")).each((function(){const t=e(this),n=d(t.data("isPremium"))||d(t.attr("data-is-premium"));t.find(".mds-card-pricing").each((function(){const t=e(this);n?(!function(t){t.find(".mds-plan-tabs").each((function(){const t=e(this),n=[];if(t.find(".mds-plan-tab").each((function(){const a=e(this),s=String(a.data("plan-tab")||"").trim();if(!s)return;const i='.mds-plan-tabpanel[data-plan-panel="'+s+'"]',o=t.find(i);if(!(o.length&&o.find(".mds-plan-card").length>0))return o.remove(),void a.remove();n.push({tab:a,key:s})})),n.length){if(!n.some((e=>e.tab.hasClass("is-active")))){const e=n[0];if(e.tab.addClass("is-active").attr("aria-selected","true"),t.find(".mds-plan-tabpanel").removeClass("is-active"),e.key){const n='.mds-plan-tabpanel[data-plan-panel="'+e.key+'"]';t.find(n).addClass("is-active")}}}else t.remove()}))}(t),t.find(".mds-plan-card").length>0?t.removeClass("mds-card-pricing--empty"):t.remove()):t.remove()}))})),e(document).on("mouseenter focusin",".mds-plan-card",(function(){f(e(this),!0)})),e(document).on("mouseleave",".mds-plan-card",(function(){f(e(this),!1)})),e(document).on("focusout",".mds-plan-card",(function(t){const n=e(this),a=t.relatedTarget;a&&n.has(a).length>0||f(n,!1)})),e(document).on("click",".mds-plan-tab",(function(){const t=e(this),n=String(t.data("plan-tab")||"").trim();if(!n)return;const a=t.closest(".mds-plan-tabs");a.length&&(a.find(".mds-plan-tab").removeClass("is-active").attr("aria-selected","false"),t.addClass("is-active").attr("aria-selected","true"),a.find(".mds-plan-tabpanel").removeClass("is-active"),a.find('.mds-plan-tabpanel[data-plan-panel="'+n+'"]').addClass("is-active"))})),e(document).on("click",".mds-card-license-toggle",(function(t){t.preventDefault();const n=e(this),a="true"===n.attr("aria-expanded"),s=n.closest(".mds-extension-card").find(".mds-card-license").first();s.length&&(a?s.attr("hidden",!0).attr("aria-hidden","true").addClass("is-collapsed"):s.removeAttr("hidden").attr("aria-hidden","false").removeClass("is-collapsed"),n.attr("aria-expanded",a?"false":"true"))})),function(){try{const t=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.license_key?String(MDS_EXTENSIONS_DATA.license_key).trim():"",n=(window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.extension_server_url?MDS_EXTENSIONS_DATA.extension_server_url:"https://milliondollarscript.com").replace(/\/+$/,""),a=e('.mds-extension-card[data-is-premium="true"], table.widefat tbody tr[data-is-premium="true"]').filter((function(){return!e(this).attr("data-plugin-file")}));function s(t,n){let a=t.find(".mds-card-actions");a.length||(a=t.find(".mds-purchase-buttons")),a.length&&!t.find(".mds-license-required-note").length&&e('<span class="mds-license-required-note" title="License required" style="margin-left:8px;color:#666;">'+(n||"License required")+"</span>").appendTo(a)}function i(e,t){const n=e.find(".mds-install-extension");n.length&&(n.prop("disabled",!0).addClass("disabled").attr("aria-disabled","true").attr("title",t||"License required"),s(e,"License required"))}function o(e){const t=e.find(".mds-install-extension");t.length&&(t.prop("disabled",!1).removeClass("disabled").removeAttr("aria-disabled").removeAttr("title"),e.find(".mds-license-required-note").remove())}if(!a.length)return;if(!t)return void a.each((function(){const t=e(this);if(m(t))return void o(t);"true"===String(t.data("is-licensed")||"").toLowerCase()?o(t):i(t)}));const c=a.toArray();function r(a){if(a>=c.length)return;const s=e(c[a]);if(m(s))return o(s),r(a+1);const d=s.data("extension-id");if(i(s,"Validating license..."),!d)return r(a+1);const l=n+"/api/public/licenses/lookup?key="+encodeURIComponent(t)+"&extensionId="+encodeURIComponent(String(d));fetch(l,{method:"GET",credentials:"omit"}).then((e=>e.ok?e.json():Promise.reject(new Error("HTTP "+e.status)))).then((e=>{!0===(e&&!0===e.valid||e&&e.data&&!0===e.data.valid)?o(s):i(s)})).catch((()=>{i(s)})).finally((()=>r(a+1)))}r(0)}catch(d){e(premiumSelector).filter((function(){return!e(this).attr("data-plugin-file")})).each((function(){const t=e(this);if(m(t))return void enableInstall(t);const n=t.find(".mds-install-extension");n.length&&n.prop("disabled",!0).addClass("disabled").attr("aria-disabled","true").attr("title","License required");let a=t.find(".mds-card-actions");a.length||(a=t.find(".mds-purchase-buttons")),a.length&&!t.find(".mds-license-required-note").length&&a.append('<span class="mds-license-required-note" title="License required" style="margin-left:8px;color:#666;">License required</span>')}))}}(),e(document).on("click",".mds-check-updates",(function(n){n.preventDefault();const u=e(this),m=u.closest(".mds-extension-card");if(!m.length)return;const p=u.data("extension-id")||m.data("extension-id"),f=u.data("current-version")||m.data("version"),g=u.data("plugin-file")||m.data("plugin-file"),_=u.data("extension-slug")||m.data("extension-slug"),h=d(m.data("is-premium"));if(!(d(m.data("can-check-updates"))||!h)){const e=c("update_check_requires_license","A valid license is required to check for updates.");return a("warning",e,!1),void o(m,"warning",e)}if(!p||!g){const e=c("update_check_missing_params","Unable to check updates for this extension.");return a("error",e,!1),void o(m,"error",e)}s(u,c("checking_updates","Checking...")),e.ajax({url:t,type:"POST",data:{action:"mds_check_extension_updates",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:p,current_version:f||"",plugin_file:g,extension_slug:_||"",requires_license:h?"1":""},dataType:"json",success:function(e){if(e&&e.success)!function(e,t,n){const s=t.find(".mds-card-update-panel");if(!s.length)return void i(n,c("check_updates","Check for Updates"));const d=e.latest_version||e.new_version||e.version||"",u=e.download_url||e.package_url||"",m=t.data("extension-id")||"",p=t.data("extension-slug")||"",f=t.data("plugin-file")||"",g=String(t.data("installed-version")||"").trim();d&&t.attr("data-available-version",d);u?t.attr("data-update-download",u):t.removeAttr("data-update-download");if(e.update_available){const a=e.changelog?`<div class="mds-changelog">${e.changelog}</div>`:"",o=u?`<button class="button button-primary mds-install-update"\n\t\t\t\t\tdata-download-url="${r(u)}"\n\t\t\t\t\tdata-extension-id="${r(m)}"\n\t\t\t\t\tdata-extension-slug="${r(p)}"\n\t\t\t\t\tdata-plugin-file="${r(f)}">${c("update_now","Update Now")}</button>`:"",l=`\n\t\t\t\t<div class="mds-update-available">\n\t\t\t\t\t<p><strong>${c("update_version_available","Version")} ${r(d)} ${c("update_is_available","is available!")}</strong></p>\n\t\t\t\t\t${a}\n\t\t\t\t\t${o?`<p>${o}</p>`:""}\n\t\t\t\t</div>\n\t\t\t`;s.html(l).attr("data-has-update","true"),t.attr("data-update-available","true"),i(n,c("check_again","Check Again"))}else{const e=c("latest_version_installed","You have the latest version.");s.empty().attr("data-has-update","false"),o(t,null,""),a("success",e,!1),t.attr("data-update-available","false"),!d&&g&&t.attr("data-available-version",g),i(n,c("check_updates","Check for Updates"))}l(t),t.trigger("mds-update-checked")}(e.data||{},m,u);else{const t=e&&e.data&&e.data.message?e.data.message:c("update_check_failed","Failed to check for updates.");a("error",t),o(m,"error",t),i(u,c("check_updates","Check for Updates"))}},error:function(){const e=c("update_check_error","An error occurred while checking for updates.");a("error",e),o(m,"error",e),i(u,c("check_updates","Check for Updates"))}})})),e(document).on("click",".mds-install-update",(function(n){n.preventDefault();const o=e(this),r=o.closest(".mds-extension-card"),d=o.data("extension-id")||(r.length?r.data("extension-id"):""),l=o.data("extension-slug")||(r.length?r.data("extension-slug"):""),u=o.data("download-url");u&&d?confirm(c("confirm_install_update","Install this update now?"))&&(s(o,c("updating_extension","Updating...")),e.ajax({url:t,type:"POST",data:{action:"mds_install_extension_update",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:d,extension_slug:l,download_url:u},dataType:"json",success:function(e){e&&e.success?(a("success",e.data&&e.data.message||c("update_install_success","Update installed successfully.")),e.data&&e.data.reload?setTimeout((()=>window.location.reload()),2e3):(i(o,c("update_install_success_short","Updated")),o.prop("disabled",!0))):(a("error",e&&e.data&&e.data.message||c("update_install_failed","Failed to install update.")),i(o,c("update_now","Update Now")))},error:function(){a("error",c("update_install_error","An error occurred while installing the update.")),i(o,c("update_now","Update Now"))}})):a("error",c("missing_update_package","Missing update package information."))})),e(document).on("click",".mds-install-extension",(function(n){n.preventDefault();const o=e(this);let c=o.closest(".mds-extension-card");c.length||(c=o.closest("tr"));const r=o.data("extension-id"),l=o.data("extension-slug"),u=c.data("is-premium"),m=!0===u||"true"===u,p="true"===String(c.data("is-licensed")||"").toLowerCase(),f=d(c.data("hasLocalLicense")),g=d(c.data("purchased"))||d(c.data("purchasedLocally")),_=!(!MDS_EXTENSIONS_DATA.license_key||!String(MDS_EXTENSIONS_DATA.license_key).trim());if(!m||(p||f||g||_))s(o,"Installing..."),e.ajax({url:t,type:"POST",data:{action:"mds_install_extension",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:r,extension_slug:l},dataType:"json",success:function(e){e.success?(a("success",e.data.message||"Extension installed successfully."),e.data.reload&&setTimeout((()=>window.location.reload()),2e3)):(a("error",e.data.message||"Failed to install extension."),i(o))},error:function(){a("error","An error occurred while installing the extension."),i(o)}});else{a("warning",`This extension requires a valid license. Enter your license key at Million Dollar Script → Options → System → License Key. <a href="${MDS_EXTENSIONS_DATA.settings_url||"#"}">Open System tab</a>`,!1)}})),e(document).on("click",".mds-activate-extension",(function(n){n.preventDefault();const o=e(this),c=o.data("extension-slug"),r=o.data("nonce");confirm(MDS_EXTENSIONS_DATA.i18n?.confirm_activation||"Are you sure you want to activate this extension?")&&(s(o,MDS_EXTENSIONS_DATA.i18n?.activating||"Activating..."),e.ajax({url:t,type:"POST",data:{action:"mds_activate_extension",nonce:r,extension_slug:c},dataType:"json",success:function(t){if(t.success)if(a("success",t.data.message||MDS_EXTENSIONS_DATA.i18n?.activation_success||"Extension activated successfully."),!1!==t.data.reload)setTimeout((()=>window.location.reload()),1500);else{const t=e('<span class="button button-secondary mds-ext-active" disabled="disabled">Active</span>');o.replaceWith(t)}else a("error",t.data.message||MDS_EXTENSIONS_DATA.i18n?.activation_failed||"Failed to activate extension."),i(o,MDS_EXTENSIONS_DATA.i18n?.activate||"Activate")},error:function(){a("error",MDS_EXTENSIONS_DATA.i18n?.activation_error||"An error occurred while activating the extension."),i(o,MDS_EXTENSIONS_DATA.i18n?.activate||"Activate")}}))})),e(document).on("click",".mds-cancel-auto-renew",(function(n){n.preventDefault();const o=e(this);if(o.prop("disabled"))return;const r=o.data("extension-slug");r?confirm(c("confirm_cancel_auto","Cancel automatic renewal for this subscription?"))&&(s(o,c("canceling_auto","Canceling...")),e.post(t,{action:"mds_cancel_subscription",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:r}).done((function(e){if(e&&e.success){a("success",e.data&&e.data.message||c("auto_cancel_success","Auto-renew canceled.")),i(o,c("auto_canceled","Auto-renew canceled")),o.prop("disabled",!0);const t=o.closest(".mds-extension-card");t.length&&(t.attr("data-auto-renewing","false"),t.attr("data-auto-renew-cancelled","true"))}else a("error",e&&e.data&&e.data.message||c("auto_cancel_failed","Failed to cancel auto-renew."),!1),i(o,c("cancel_auto_renewal","Cancel Auto-renewal"))})).fail((function(){a("error",c("auto_cancel_error","Failed to cancel auto-renew."),!1),i(o,c("cancel_auto_renewal","Cancel Auto-renewal"))}))):a("error",c("auto_cancel_missing_slug","Unable to cancel auto-renew for this extension."),!1)})),e(document).on("click",".mds-purchase-extension",(function(n){n.preventDefault();const a=e(this);if(a.prop("disabled"))return;const o=a.data("extension-id"),r=a.data("nonce"),d=String(a.data("plan")||"").trim(),l=String(a.data("price-id")||"").trim(),u=a.closest(".mds-plan-card"),m=u.find(".mds-plan-feedback");p(m,"",""),o&&r?d?(s(a,c("processing_plan","Processing…")),e.ajax({url:t,type:"POST",dataType:"json",data:{action:"mds_purchase_extension",nonce:r,extension_id:o,plan:d,price_id:l},success:function(e){if(e&&e.success&&e.data&&e.data.checkout_url)return p(m,c("redirecting_checkout","Redirecting to checkout…"),"success"),void(window.location.href=e.data.checkout_url);const t=c("purchase_failed","Failed to initiate purchase."),n=e&&e.data&&e.data.message?e.data.message:t;p(m,n,"error"),i(a),f(u,!1)},error:function(){p(m,c("purchase_network_error","An error occurred while contacting the store. Please try again."),"error"),i(a),f(u,!1)}})):p(m,c("missing_plan","Please choose a plan to continue."),"error"):p(m,c("missing_parameters","Unable to start checkout. Please refresh and try again."),"error")})),function(){try{const n=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.purchase||{};if("session_expired"===n.status){return void a("warning",n.message||"Your claim session has expired. Please claim your license manually using the license key from your email.",!1)}if(!n||"success"!==n.status)return;const s=String(n.claim_token||"").trim(),i=String(n.ext_slug||"").trim();if(!s||!i)return;const o=String(MDS_EXTENSIONS_DATA.site_id||"").trim();if(!o)return;let c=0;const r=12,d=()=>{c++,1===c&&a("success","Finalizing your purchase (claiming license)...",!1),e.ajax({url:t,type:"POST",data:{action:"mds_claim_license",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:i,claim_token:s,site_id:o},dataType:"json",success:function(e){if(e&&e.success)a("success","License claimed. You can now install the extension."),setTimeout((()=>window.location.replace(window.location.href.replace(/([?&])(purchase|session)=[^&]*/g,"$1").replace(/[?&]$/,""))),1500);else if(c<r)setTimeout(d,5e3);else{a("error",e&&e.data&&e.data.message?e.data.message:"License claim failed.",!1)}},error:function(){c<r?setTimeout(d,5e3):a("error","An error occurred while claiming the license.",!1)}})};d()}catch(e){}}(),e(document).on("click",".mds-activate-license",(function(n){n.preventDefault();const o=e(this).closest(".mds-license-form"),c=e(this),r=o.data("extension-slug");let d=o.find('input[name="license_key"]').val();const l=o.find('input[name="nonce"]').val(),u=()=>{s(c,"Activating..."),e.post(t,{action:"mds_activate_license",extension_slug:r,license_key:d,nonce:l}).done((function(e){if(e&&e.success)location.reload();else{a("error",e&&e.data&&e.data.message?e.data.message:"Activation failed.",!1),i(c,"Activate")}})).fail((function(){a("error","An error occurred during activation.",!1),i(c,"Activate")}))};d?u():e.post(t,{action:"mds_get_license_plaintext",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:r}).done((function(e){e&&e.success&&e.data&&e.data.license_key&&(d=e.data.license_key)})).always(u)})),e(document).on("click",".mds-deactivate-license",(function(n){n.preventDefault();const o=e(this).closest(".mds-license-form"),c=e(this),r=o.data("extension-slug"),d=o.find('input[name="nonce"]').val();s(c,"Deactivating..."),e.post(t,{action:"mds_deactivate_license",extension_slug:r,nonce:d}).done((function(e){if(e&&e.success)location.reload();else{a("error",e&&e.data&&e.data.message?e.data.message:"Deactivation failed.",!1),i(c,"Deactivate")}})).fail((function(){a("error","An error occurred during deactivation.",!1),i(c,"Deactivate")}))})),e(document).on("click",".mds-remove-license, .mds-inline-license-remove",(function(n){n.preventDefault();const o=e(this);if(!confirm(c("confirm_remove_license","Remove the stored license for this extension?")))return;const r=function(e){let t=e.attr("data-extension-slug")||e.data("extensionSlug")||"",n=e.attr("data-nonce")||e.data("nonce")||"";const a=e.closest(".mds-license-form");a.length&&(t=t||a.data("extension-slug"),n=n||a.find('input[name="nonce"]').val());const s=e.closest(".mds-inline-license");if(s.length&&(t=t||s.data("extension-slug"),n=n||s.data("licenseNonce")),!t){const n=e.closest("[data-extension-slug]");n.length&&(t=n.data("extension-slug")||"")}return{slug:t?String(t):"",nonce:n?String(n):""}}(o),d=r.slug,l=r.nonce;if(!d||!l)return void a("error",c("license_context_missing","Unable to locate license context."),!1);const u=o.hasClass("button-link")&&!o.hasClass("button"),m=o.html();u?o.prop("disabled",!0).text(c("removing_license","Removing…")):s(o,c("removing_license","Removing…")),e.post(t,{action:"mds_delete_license",extension_slug:d,nonce:l}).done((function(e){e&&e.success?(a("success",e.data&&e.data.message||c("license_removed","License removed.")),setTimeout((()=>window.location.reload()),800)):a("error",e&&e.data&&e.data.message||c("license_remove_failed","Failed to remove license."),!1)})).fail((function(){a("error",c("license_remove_failed","Failed to remove license."),!1)})).always((function(){u?o.prop("disabled",!1).html(m):i(o)}))})),e(document).on("click",".mds-inline-license-activate",(function(n){n.preventDefault();const o=e(this),r=o.closest(".mds-inline-license"),d=r.data("extension-slug"),l=String(r.find(".mds-inline-license-key").val()||"").trim();d?l?(s(o,c("saving_license","Applying...")),e.post(t,{action:"mds_available_activate_license",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:d,license_key:l}).done((function(e){e&&e.success?(a("success",e.data&&e.data.message||c("license_saved","License saved.")),setTimeout((()=>window.location.reload()),800)):(a("error",e&&e.data&&e.data.message||c("license_save_failed","Failed to save license."),!1),i(o,c("apply_license","Apply license")))})).fail((function(){a("error",c("license_save_failed","Failed to save license."),!1),i(o,c("apply_license","Apply license"))}))):a("warning","Please enter a license key.",!1):a("error","Missing extension identifier.",!1)})),e(document).on("click",".mds-inline-license-visibility",(function(){const n=e(this),a=n.closest(".mds-inline-license"),s=a.find('.mds-inline-license-key, input[name="license_key"]'),i=n.find(".dashicons"),o=a.data("extension-slug");"password"===s.attr("type")?s.val()?(s.attr("type","text"),n.attr("aria-label","Hide"),i.removeClass("dashicons-hidden").addClass("dashicons-visibility")):e.post(t,{action:"mds_get_license_plaintext",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:o}).done((function(e){e&&e.success&&e.data&&e.data.license_key&&s.val(e.data.license_key)})).always((function(){s.attr("type","text"),n.attr("aria-label","Hide"),i.removeClass("dashicons-hidden").addClass("dashicons-visibility")})):(s.attr("type","password"),n.attr("aria-label","Show"),i.removeClass("dashicons-visibility").addClass("dashicons-hidden"))})),function(){try{e(".mds-license-cell").each((function(t){const n=e(this);if(n.data("manage-init"))return;const a=n.find(".mds-inline-license, .mds-license-form").first();if(!a.length)return;const s="mds-license-content-"+t;if(a.parent().hasClass("mds-license-manage-content")||a.wrap('<div class="mds-license-manage-content" id="'+s+'" aria-hidden="true"></div>'),!n.find(".mds-manage-license-toggle").length){const t=e('<button type="button" class="button-link mds-manage-license-toggle" aria-expanded="false" aria-controls="'+s+'"></button>');t.text(c("manage_license","Manage license")),n.prepend(t)}n.attr("data-manage-init","1")}))}catch(e){}}(),e(document).on("click",".mds-manage-license-toggle",(function(t){t.preventDefault();const n=e(this),a=n.attr("aria-controls"),s=e("#"+a);"true"===n.attr("aria-expanded")?(s.removeClass("is-open").attr("aria-hidden","true"),n.attr("aria-expanded","false").text(c("manage_license","Manage license"))):(s.addClass("is-open").attr("aria-hidden","false"),n.attr("aria-expanded","true").text(c("hide_license","Hide")))})),e(document).on("click",".mds-inline-license-activate",(function(){const n=e(this).closest(".mds-inline-license"),o=n.find(".mds-inline-license-key"),c=n.data("extension-slug"),r=String(o.val()||"").trim();if(!r)return void a("warning","Enter a license key first.",!1);const d=e(this);s(d,"Validating..."),e.post(t,{action:"mds_available_activate_license",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:c,license_key:r}).done((function(e){e&&e.success?(a("success",e.data&&e.data.message?e.data.message:"License updated."),setTimeout((()=>window.location.reload()),1e3)):a("error",e&&e.data&&e.data.message||"Failed to save license.",!1)})).fail((function(){a("error","Failed to save license.",!1)})).always((function(){i(d,"Activate")}))}))}))}(window.jQuery);