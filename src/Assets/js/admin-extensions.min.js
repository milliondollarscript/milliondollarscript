!function(e){const n=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.ajax_url?String(MDS_EXTENSIONS_DATA.ajax_url):"string"==typeof window.ajaxurl?window.ajaxurl:"";e((function(){"use strict";function t(n,t,s=!0){const a="error"===n?"notice-error":"warning"===n?"notice-warning":"notice-success",i=`\n\t\t\t<div class="notice ${a} is-dismissible mds-enhanced-notice">\n\t\t\t\t<p><span class="mds-notice-icon">${"error"===n?"❌":"warning"===n?"⚠️":"✅"}</span> ${t}</p>\n\t\t\t\t<button type="button" class="notice-dismiss">\n\t\t\t\t\t<span class="screen-reader-text">Dismiss this notice.</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;e(".mds-enhanced-notice").remove();const o=e(i),c=e("#mds-extensions-notices");if(c.length)o.appendTo(c);else{const n=e("#mds-extensions-page .mds-extensions-container").first();n.length?o.insertBefore(n):o.prependTo(e("#wpbody-content").first())}o.show(),s&&"success"===n&&setTimeout((()=>{e(".mds-enhanced-notice.notice."+a).remove()}),5e3),e(document).off("click",".mds-enhanced-notice .notice-dismiss").on("click",".mds-enhanced-notice .notice-dismiss",(function(){e(this).closest(".mds-enhanced-notice").remove()}))}function s(e,n){e.data("original-html",e.html()),e.prop("disabled",!0).html(`<span class="spinner is-active"></span> ${n}`).addClass("mds-btn-loading")}function a(e,n=null){const t=n||e.data("original-html")||e.html();e.prop("disabled",!1).html(t).removeClass("mds-btn-loading")}!function(){try{const n=e("#mds-extensions-notices"),t=e("#mds-extensions-page .mds-extensions-header .notice");if(t.length)if(n.length)t.detach().appendTo(n);else{const n=e("#mds-extensions-page .mds-extensions-container").first();n.length&&t.detach().insertBefore(n)}}catch(e){}}();const i=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.text||{};function o(e,n){if(i&&Object.prototype.hasOwnProperty.call(i,e)){const n=i[e];if("string"==typeof n&&""!==n)return n}return n}function c(n){return e("<div>").text(null==n?"":String(n)).html()}function d(e,n="",s=""){e&&e.length?(e.removeClass("is-error is-success"),n?("error"===s?e.addClass("is-error"):"success"===s&&e.addClass("is-success"),e.text(n)):e.text("")):n&&t("error"===s?"error":"success",n,"error"!==s)}function l(e,n){e&&e.length&&e.toggleClass("is-highlighted",!!n)}e(document).on("mouseenter focusin",".mds-plan-card",(function(){l(e(this),!0)})),e(document).on("mouseleave",".mds-plan-card",(function(){l(e(this),!1)})),e(document).on("focusout",".mds-plan-card",(function(n){const t=e(this),s=n.relatedTarget;s&&t.has(s).length>0||l(t,!1)})),e(document).on("click",".mds-card-license-toggle",(function(n){n.preventDefault();const t=e(this),s="true"===t.attr("aria-expanded"),a=t.closest(".mds-extension-card").find(".mds-card-license").first();a.length&&(s?a.attr("hidden",!0).attr("aria-hidden","true").addClass("is-collapsed"):a.removeAttr("hidden").attr("aria-hidden","false").removeClass("is-collapsed"),t.attr("aria-expanded",s?"false":"true"))})),function(){try{const n=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.license_key?String(MDS_EXTENSIONS_DATA.license_key).trim():"",t=(window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.extension_server_url?MDS_EXTENSIONS_DATA.extension_server_url:"http://localhost:15346").replace(/\/+$/,""),s=e('.mds-extension-card[data-is-premium="true"], table.widefat tbody tr[data-is-premium="true"]').filter((function(){return!e(this).attr("data-plugin-file")}));function a(n,t){let s=n.find(".mds-card-actions");s.length||(s=n.find(".mds-purchase-buttons")),s.length&&!n.find(".mds-license-required-note").length&&e('<span class="mds-license-required-note" title="License required" style="margin-left:8px;color:#666;">'+(t||"License required")+"</span>").appendTo(s)}function i(e,n){const t=e.find(".mds-install-extension");t.length&&(t.prop("disabled",!0).addClass("disabled").attr("aria-disabled","true").attr("title",n||"License required"),a(e,"License required"))}function o(e){const n=e.find(".mds-install-extension");n.length&&(n.prop("disabled",!1).removeClass("disabled").removeAttr("aria-disabled").removeAttr("title"),e.find(".mds-license-required-note").remove())}if(!s.length)return;if(!n)return void s.each((function(){const n=e(this);"true"===String(n.data("is-licensed")||"").toLowerCase()?o(n):i(n)}));const c=s.toArray();function d(s){if(s>=c.length)return;const a=e(c[s]),l=a.data("extension-id");if(i(a,"Validating license..."),!l)return d(s+1);const r=t+"/api/public/licenses/lookup?key="+encodeURIComponent(n)+"&extensionId="+encodeURIComponent(String(l));fetch(r,{method:"GET",credentials:"omit"}).then((e=>e.ok?e.json():Promise.reject(new Error("HTTP "+e.status)))).then((e=>{!0===(e&&!0===e.valid||e&&e.data&&!0===e.data.valid)?o(a):i(a)})).catch((()=>{i(a)})).finally((()=>d(s+1)))}d(0)}catch(l){e(premiumSelector).filter((function(){return!e(this).attr("data-plugin-file")})).each((function(){const n=e(this),t=n.find(".mds-install-extension");t.length&&t.prop("disabled",!0).addClass("disabled").attr("aria-disabled","true").attr("title","License required");let s=n.find(".mds-card-actions");s.length||(s=n.find(".mds-purchase-buttons")),s.length&&!n.find(".mds-license-required-note").length&&s.append('<span class="mds-license-required-note" title="License required" style="margin-left:8px;color:#666;">License required</span>')}))}}(),e(document).on("click",".mds-check-updates",(function(i){i.preventDefault();const o=e(this),c=o.closest("tr"),d=c.data("extension-id"),l=c.data("version"),r=c.data("plugin-file");s(o,"Checking..."),e.ajax({url:n,type:"POST",data:{action:"mds_check_extension_updates",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:d,current_version:l,plugin_file:r},dataType:"json",success:function(e){e.success?function(e,n){const t=n.find(".mds-update-cell"),s=n.find(".mds-check-updates"),i=e.latest_version||e.new_version||e.version||"",o=e.download_url||e.package_url||"",c=n.data("extension-id")||"";if(e.update_available){const n=`\n\t\t\t\t<div class="mds-update-available">\n\t\t\t\t\t<p><strong>Version ${i} is available!</strong></p>\n\t\t\t\t\t${e.changelog?`<div class="mds-changelog">${e.changelog}</div>`:""}\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<button class="button button-primary mds-install-update"\n\t\t\t\t\t\t\t\tdata-download-url="${o}"\n\t\t\t\t\t\t\t\tdata-extension-id="${c}">\n\t\t\t\t\t\t\tUpdate Now\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t`;t.html(n),a(s,"Check Again")}else t.html('<span class="mds-no-updates">You have the latest version.</span>'),a(s,"Check for Updates");n.trigger("mds-update-checked")}(e.data,c):(t("error",e.data.message||"Failed to check for updates."),a(o))},error:function(){t("error","An error occurred while checking for updates."),a(o)}})})),e(document).on("click",".mds-install-update",(function(i){i.preventDefault();const o=e(this),c=o.closest("tr"),d=o.data("extension-id")||c.data("extension-id"),l=o.data("extension-slug")||"",r=o.data("download-url");r&&d?confirm("Install this update now?")&&(s(o,"Updating..."),e.ajax({url:n,type:"POST",data:{action:"mds_install_extension_update",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:d,extension_slug:l,download_url:r},dataType:"json",success:function(e){e.success?(t("success",e.data.message||"Update installed successfully."),e.data.reload&&setTimeout((()=>window.location.reload()),2e3)):(t("error",e.data.message||"Failed to install update."),a(o))},error:function(){t("error","An error occurred while installing the update."),a(o)}})):t("error","Missing update package information.")})),e(document).on("click",".mds-install-extension",(function(i){i.preventDefault();const o=e(this);let c=o.closest(".mds-extension-card");c.length||(c=o.closest("tr"));const d=o.data("extension-id"),l=o.data("extension-slug"),r=c.data("is-premium"),u=!0===r||"true"===r,m="true"===String(c.data("is-licensed")||"").toLowerCase()||!(!MDS_EXTENSIONS_DATA.license_key||!String(MDS_EXTENSIONS_DATA.license_key).trim());if(!u||m)s(o,"Installing..."),e.ajax({url:n,type:"POST",data:{action:"mds_install_extension",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:d,extension_slug:l},dataType:"json",success:function(e){e.success?(t("success",e.data.message||"Extension installed successfully."),e.data.reload&&setTimeout((()=>window.location.reload()),2e3)):(t("error",e.data.message||"Failed to install extension."),a(o))},error:function(){t("error","An error occurred while installing the extension."),a(o)}});else{t("warning",`This extension requires a valid license. Enter your license key at Million Dollar Script → Options → System → License Key. <a href="${MDS_EXTENSIONS_DATA.settings_url||"#"}">Open System tab</a>`,!1)}})),e(document).on("click",".mds-activate-extension",(function(i){i.preventDefault();const o=e(this),c=o.data("extension-slug"),d=o.data("nonce");confirm(MDS_EXTENSIONS_DATA.i18n?.confirm_activation||"Are you sure you want to activate this extension?")&&(s(o,MDS_EXTENSIONS_DATA.i18n?.activating||"Activating..."),e.ajax({url:n,type:"POST",data:{action:"mds_activate_extension",nonce:d,extension_slug:c},dataType:"json",success:function(n){if(n.success)if(t("success",n.data.message||MDS_EXTENSIONS_DATA.i18n?.activation_success||"Extension activated successfully."),!1!==n.data.reload)setTimeout((()=>window.location.reload()),1500);else{const n=e('<span class="button button-secondary mds-ext-active" disabled="disabled">Active</span>');o.replaceWith(n)}else t("error",n.data.message||MDS_EXTENSIONS_DATA.i18n?.activation_failed||"Failed to activate extension."),a(o,MDS_EXTENSIONS_DATA.i18n?.activate||"Activate")},error:function(){t("error",MDS_EXTENSIONS_DATA.i18n?.activation_error||"An error occurred while activating the extension."),a(o,MDS_EXTENSIONS_DATA.i18n?.activate||"Activate")}}))})),e(document).on("click",".mds-check-all-updates",(function(n){n.preventDefault();const i=e(this),o=e("tr[data-extension-id]");let c=0,d=!1;function l(){c>=o.length&&(a(i),t("success",d?"Finished checking for updates. Some extensions have updates available.":"All extensions are up to date."))}s(i,"Checking All..."),o.each((function(){const n=e(this),t=n.find(".mds-check-updates");if(t.prop("disabled"))return c++,void l();t.trigger("click"),n.off("mds-update-checked").on("mds-update-checked",(function(){c++,n.find(".mds-update-available").length&&(d=!0),l()}))}))})),e(document).on("click",".mds-manage-subscription",(function(){const t=e(this).data("extension-slug");!function(){if(e("#mds-manage-modal").length)return;e("body").append('\n        <div id="mds-manage-modal" class="mds-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="mds-manage-title">\n            <div class="mds-modal">\n                <header><span id="mds-manage-title">Manage subscription</span></header>\n                <div class="mds-modal-body">\n                    <div class="mds-manage-content">\n                        <p class="mds-manage-loading">Loading…</p>\n                        <div class="mds-manage-error" style="color:#b91c1c; display:none;"></div>\n                        <div class="mds-manage-details" style="display:none;">\n                            <div class="mds-current-plan"></div>\n                            <fieldset class="mds-plan-change" style="margin-top:10px;">\n                                <legend>Change plan</legend>\n                                <div class="mds-plan-options"></div>\n                            </fieldset>\n                        </div>\n                    </div>\n                </div>\n                <footer>\n                    <button type="button" class="button mds-modal-cancel">Close</button>\n                    <button type="button" class="button mds-cancel-subscription">Cancel auto-renew</button>\n                    <button type="button" class="button button-primary mds-apply-plan" disabled>Apply</button>\n                </footer>\n            </div>\n        </div>')}();const s=e("#mds-manage-modal"),a=s.find(".mds-manage-loading"),i=s.find(".mds-manage-error"),o=s.find(".mds-manage-details"),d=s.find(".mds-plan-options"),l=s.find(".mds-apply-plan").prop("disabled",!0).data("extension-slug",t);s.find(".mds-cancel-subscription").data("extension-slug",t);i.hide().text(""),o.hide(),a.show(),s.css("display","flex"),e.post(n,{action:"mds_get_subscription",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:t}).done((function(n){if(!n||!n.success||!n.data)return void i.text(n&&n.data&&n.data.message||"Could not load subscription.").show();const t=n.data,a=t.currentPlan||t.plan||"",r=t.currentPlanDescription||"",u=t.availablePlans||[],m=Array.isArray(t.planDetails)?t.planDetails:[],p={};m.forEach((e=>{if(!e||"object"!=typeof e)return;const n=e.plan||e.key;n&&(p[n]=e)}));let f=r;if(!f){if(f={one_time:"One-time (no renewals)",monthly:"Monthly subscription",yearly:"Yearly subscription"}[a]||a||"",("monthly"===a||"yearly"===a)&&t.renewsAt)try{f+=" (renews "+new Date(t.renewsAt).toLocaleDateString()+")"}catch{}}if(s.find(".mds-current-plan").text(f?"Current plan: "+f:""),u.length){const n={one_time:"One-time",monthly:"Monthly subscription",yearly:"Yearly subscription"},t=u.map((e=>{const t=e===a,s=p[e]||{},i=s.label||n[e]||e,o=t?' <em class="mds-current-plan-indicator">(current)</em>':"",d=t?" checked":"",l=t?' disabled aria-checked="true"':"",r=Array.isArray(s.features)?s.features:[],u=r.length?`<ul class="mds-plan-features">${r.map((e=>`<li>${c(e)}</li>`)).join("")}</ul>`:"",m=u?`<div class="mds-plan-option-body">${u}</div>`:"";return`<div class="mds-plan-option"><label class="mds-plan-option-header"><input type="radio" name="mds-manage-plan" value="${e}"${d}${l}><span>${c(i)}${o}</span></label>${m}</div>`})).join("");d.html(t),d.off("change",'input[name="mds-manage-plan"]').on("change",'input[name="mds-manage-plan"]',(function(){const n=e(this).val();l.prop("disabled",!n||n===a).data("plan",n)}))}else d.html("<p>No alternative plans available.</p>");o.show()})).fail((function(){i.text("Could not load subscription.").show()})).always((function(){a.hide()}))})),e(document).on("click","#mds-manage-modal .mds-modal-cancel",(function(){e("#mds-manage-modal").hide()})),e(document).on("click",".mds-apply-plan",(function(){const s=e(this),a=s.data("extension-slug"),i=s.data("plan");a&&i&&(s.prop("disabled",!0).text("Applying…"),e.post(n,{action:"mds_change_subscription_plan",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:a,plan:i}).done((function(e){e&&e.success?(t("success",e.data&&e.data.message||"Plan changed."),setTimeout((()=>window.location.reload()),800)):t("error",e&&e.data&&e.data.message||"Failed to change plan.",!1)})).fail((function(){t("error","Failed to change plan.",!1)})).always((function(){s.prop("disabled",!1).text("Apply")})))})),e(document).on("click",".mds-cancel-subscription",(function(){if(!confirm("Cancel automatic renewal for this subscription?"))return;const s=e(this).prop("disabled",!0).text("Canceling…"),a=s.data("extension-slug");e.post(n,{action:"mds_cancel_subscription",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:a}).done((function(e){e&&e.success?(t("success",e.data&&e.data.message||"Auto-renew canceled."),setTimeout((()=>window.location.reload()),800)):t("error",e&&e.data&&e.data.message||"Failed to cancel.",!1)})).fail((function(){t("error","Failed to cancel.",!1)})).always((function(){s.prop("disabled",!1).text("Cancel auto-renew")}))})),e(document).on("click",".mds-purchase-extension",(function(t){t.preventDefault();const i=e(this);if(i.prop("disabled"))return;const c=i.data("extension-id"),r=i.data("nonce"),u=String(i.data("plan")||"").trim(),m=i.closest(".mds-plan-card"),p=m.find(".mds-plan-feedback");d(p,"",""),c&&r?u?(s(i,o("processing_plan","Processing…")),e.ajax({url:n,type:"POST",dataType:"json",data:{action:"mds_purchase_extension",nonce:r,extension_id:c,plan:u},success:function(e){if(e&&e.success&&e.data&&e.data.checkout_url)return d(p,o("redirecting_checkout","Redirecting to checkout…"),"success"),void(window.location.href=e.data.checkout_url);const n=o("purchase_failed","Failed to initiate purchase."),t=e&&e.data&&e.data.message?e.data.message:n;d(p,t,"error"),a(i),l(m,!1)},error:function(){d(p,o("purchase_network_error","An error occurred while contacting the store. Please try again."),"error"),a(i),l(m,!1)}})):d(p,o("missing_plan","Please choose a plan to continue."),"error"):d(p,o("missing_parameters","Unable to start checkout. Please refresh and try again."),"error")})),function(){try{const s=window.MDS_EXTENSIONS_DATA&&MDS_EXTENSIONS_DATA.purchase||{};if(!s||"success"!==s.status)return;const a=String(s.claim_token||"").trim(),i=String(s.ext_slug||"").trim();if(!a||!i)return;const o=String(MDS_EXTENSIONS_DATA.site_id||"").trim();if(!o)return;let c=0;const d=12,l=()=>{c++,1===c&&t("success","Finalizing your purchase (claiming license)...",!1),e.ajax({url:n,type:"POST",data:{action:"mds_claim_license",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:i,claim_token:a,site_id:o},dataType:"json",success:function(e){if(e&&e.success)t("success","License claimed. You can now install the extension."),setTimeout((()=>window.location.replace(window.location.href.replace(/([?&])purchase=success[^&]*/,"$1"))),1500);else if(c<d)setTimeout(l,5e3);else{t("error",e&&e.data&&e.data.message?e.data.message:"License claim failed.",!1)}},error:function(){c<d?setTimeout(l,5e3):t("error","An error occurred while claiming the license.",!1)}})};l()}catch(e){}}(),e(document).on("click",".mds-activate-license",(function(i){i.preventDefault();const o=e(this).closest(".mds-license-form"),c=e(this),d=o.data("extension-slug");let l=o.find('input[name="license_key"]').val();const r=o.find('input[name="nonce"]').val(),u=()=>{s(c,"Activating..."),e.post(n,{action:"mds_activate_license",extension_slug:d,license_key:l,nonce:r}).done((function(e){if(e&&e.success)location.reload();else{t("error",e&&e.data&&e.data.message?e.data.message:"Activation failed.",!1),a(c,"Activate")}})).fail((function(){t("error","An error occurred during activation.",!1),a(c,"Activate")}))};l?u():e.post(n,{action:"mds_get_license_plaintext",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:d}).done((function(e){e&&e.success&&e.data&&e.data.license_key&&(l=e.data.license_key)})).always(u)})),e(document).on("click",".mds-deactivate-license",(function(i){i.preventDefault();const c=e(this).closest(".mds-license-form"),d=e(this),l=c.data("extension-slug"),r=c.find('input[name="nonce"]').val();s(d,"Deactivating..."),e.post(n,{action:"mds_deactivate_license",extension_slug:l,nonce:r}).done((function(e){if(e&&e.success)location.reload();else{t("error",e&&e.data&&e.data.message?e.data.message:"Deactivation failed.",!1),a(d,"Deactivate")}})).fail((function(){t("error","An error occurred during deactivation.",!1),a(d,"Deactivate")})),e(document).on("click",".mds-remove-license, .mds-inline-license-remove",(function(i){i.preventDefault();const c=e(this);if(!confirm(o("confirm_remove_license","Remove the stored license for this extension?")))return;const d=function(e){let n=e.attr("data-extension-slug")||e.data("extensionSlug")||"",t=e.attr("data-nonce")||e.data("nonce")||"";const s=e.closest(".mds-license-form");s.length&&(n=n||s.data("extension-slug"),t=t||s.find('input[name="nonce"]').val());const a=e.closest(".mds-inline-license");if(a.length&&(n=n||a.data("extension-slug"),t=t||a.data("licenseNonce")),!n){const t=e.closest("[data-extension-slug]");t.length&&(n=t.data("extension-slug")||"")}return{slug:n?String(n):"",nonce:t?String(t):""}}(c),l=d.slug,r=d.nonce;if(!l||!r)return void t("error",o("license_context_missing","Unable to locate license context."),!1);const u=c.hasClass("button-link")&&!c.hasClass("button"),m=c.html();u?c.prop("disabled",!0).text(o("removing_license","Removing…")):s(c,o("removing_license","Removing…")),e.post(n,{action:"mds_delete_license",extension_slug:l,nonce:r}).done((function(e){e&&e.success?(t("success",e.data&&e.data.message||o("license_removed","License removed.")),setTimeout((()=>window.location.reload()),800)):t("error",e&&e.data&&e.data.message||o("license_remove_failed","Failed to remove license."),!1)})).fail((function(){t("error",o("license_remove_failed","Failed to remove license."),!1)})).always((function(){u?c.prop("disabled",!1).html(m):a(c)}))}))}))})),e(document).on("click",".mds-inline-license-activate",(function(t){t.preventDefault();const s=e(this),a=s.closest(".mds-inline-license"),i=a.data("extension-slug"),o=String(a.find(".mds-inline-license-key").val()||"").trim();i?o?(setButtonLoading(s,"Activating..."),e.post(n,{action:"mds_available_activate_license",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:i,license_key:o}).done((function(e){e&&e.success?(showNotice("success",e.data&&e.data.message||"License activated."),setTimeout((()=>window.location.reload()),800)):(showNotice("error",e&&e.data&&e.data.message||"Activation failed.",!1),resetButton(s,"Activate"))})).fail((function(){showNotice("error","Activation failed.",!1),resetButton(s,"Activate")}))):showNotice("warning","Please enter a license key.",!1):showNotice("error","Missing extension identifier.",!1)})),e(document).on("click",".mds-inline-license-visibility",(function(){const t=e(this),s=t.closest(".mds-inline-license"),a=s.find('.mds-inline-license-key, input[name="license_key"]'),i=t.find(".dashicons"),o=s.data("extension-slug");"password"===a.attr("type")?a.val()?(a.attr("type","text"),t.attr("aria-label","Hide"),i.removeClass("dashicons-hidden").addClass("dashicons-visibility")):e.post(n,{action:"mds_get_license_plaintext",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:o}).done((function(e){e&&e.success&&e.data&&e.data.license_key&&a.val(e.data.license_key)})).always((function(){a.attr("type","text"),t.attr("aria-label","Hide"),i.removeClass("dashicons-hidden").addClass("dashicons-visibility")})):(a.attr("type","password"),t.attr("aria-label","Show"),i.removeClass("dashicons-visibility").addClass("dashicons-hidden"))})),function(){try{e(".mds-license-cell").each((function(n){const t=e(this);if(t.data("manage-init"))return;const s=t.find(".mds-inline-license, .mds-license-form").first();if(!s.length)return;const a="mds-license-content-"+n;if(s.parent().hasClass("mds-license-manage-content")||s.wrap('<div class="mds-license-manage-content" id="'+a+'" aria-hidden="true"></div>'),!t.find(".mds-manage-license-toggle").length){const n=e('<button type="button" class="button-link mds-manage-license-toggle" aria-expanded="false" aria-controls="'+a+'"></button>');n.text(getText("manage_license","Manage license")),t.prepend(n)}t.attr("data-manage-init","1")}))}catch(e){}}(),e(document).on("click",".mds-manage-license-toggle",(function(n){n.preventDefault();const t=e(this),s=t.attr("aria-controls"),a=e("#"+s);"true"===t.attr("aria-expanded")?(a.removeClass("is-open").attr("aria-hidden","true"),t.attr("aria-expanded","false").text(getText("manage_license","Manage license"))):(a.addClass("is-open").attr("aria-hidden","false"),t.attr("aria-expanded","true").text(getText("hide_license","Hide")))})),e(document).on("click",".mds-inline-license-activate",(function(){const t=e(this).closest(".mds-inline-license"),s=t.find(".mds-inline-license-key"),a=t.data("extension-slug"),i=String(s.val()||"").trim();if(!i)return void showNotice("warning","Enter a license key first.",!1);const o=e(this);setButtonLoading(o,"Validating..."),e.post(n,{action:"mds_available_activate_license",nonce:MDS_EXTENSIONS_DATA.nonce,extension_slug:a,license_key:i}).done((function(e){e&&e.success?(showNotice("success",e.data&&e.data.message?e.data.message:"License updated."),setTimeout((()=>window.location.reload()),1e3)):showNotice("error",e&&e.data&&e.data.message||"Failed to save license.",!1)})).fail((function(){showNotice("error","Failed to save license.",!1)})).always((function(){resetButton(o,"Activate")}))}))}(window.jQuery);