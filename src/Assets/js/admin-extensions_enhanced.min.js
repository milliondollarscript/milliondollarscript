jQuery(document).ready(function(c){function d(e,t,n=!0){let s="error"===e?"notice-error":"notice-success";t=`
            <div class="notice ${s} is-dismissible mds-enhanced-notice">
                <p><span class="mds-notice-icon">${"error"===e?"‚ùå":"‚úÖ"}</span> ${t}</p>
                <button type="button" class="notice-dismiss">
                    <span class="screen-reader-text">Dismiss this notice.</span>
                </button>
            </div>
        `,c(".notice."+s).remove(),t=c(t);c(".mds-extensions-header, .wrap > h1").first().after(t),t.hide().slideDown(300),n&&"success"===e&&setTimeout(()=>{c(".notice."+s).slideUp(300,function(){c(this).remove()})},5e3),c(document).off("click",".notice-dismiss").on("click",".notice-dismiss",function(){c(this).closest(".notice").slideUp(300,function(){c(this).remove()})})}function r(e,t){e.data("original-text",e.html()),e.prop("disabled",!0).html('<span class="mds-spinner"></span> '+t).addClass("mds-btn-loading")}function l(e,t=null){t=t||e.data("original-text");e.prop("disabled",!1).html(t).removeClass("mds-btn-loading")}c(document).on("click",".mds-check-updates",function(e){e.preventDefault();let o=c(this),i=o.closest("tr");var e=i.data("extension-id"),t=i.data("version"),n=i.data("plugin-file");r(o,"Checking..."),c.ajax({url:MDS_EXTENSIONS_DATA.ajax_url,type:"POST",data:{action:"mds_check_extension_updates",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:e,current_version:t,plugin_file:n},dataType:"json",success:function(e){var t,n,s,a;e.success?(t=e.data,n=i,s=n.find(".mds-update-cell"),a=n.find(".mds-check-updates"),t.update_available?(t=`
				<div class="mds-update-available">
					<p><strong>üöÄ Version ${t.latest_version} available!</strong></p>
					${t.changelog?`<div class="mds-changelog"><strong>What's new:</strong><br>${t.changelog}</div>`:""}
					<button class="button button-primary mds-install-update"
							data-download-url="${t.download_url}"
							data-extension-slug="${t.extension_slug}"
							data-extension-id="${t.extension_id||""}">
						<span class="mds-btn-icon">‚¨ÜÔ∏è</span> Update Now
					</button>
				</div>
			`,s.html(t),l(a,"Check Again")):(s.html('<span class="mds-no-updates">‚úÖ You have the latest version.</span>'),l(a)),n.trigger("mds-update-checked")):(d("error",e.data.message||"Failed to check for updates."),l(o))},error:function(e,t,n){console.error("Error checking for updates:",n),d("error","An error occurred while checking for updates."),l(o)}})}),c(document).on("click",".mds-install-update",function(e){e.preventDefault();let s=c(this);var e=s.data("extension-id"),t=s.data("extension-slug"),n=s.data("download-url");confirm("üöÄ Ready to update? This will enhance your extension with the latest features and improvements!")&&(r(s,"Updating..."),c.ajax({url:MDS_EXTENSIONS_DATA.ajax_url,type:"POST",data:{action:"mds_install_extension_update",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:e,extension_slug:t,download_url:n},dataType:"json",success:function(e){e.success?(d("success","üéâ "+(e.data.message||"Update installed successfully!")),e.data.reload&&setTimeout(()=>window.location.reload(),2e3)):(d("error",e.data.message||"Failed to install update."),l(s))},error:function(e,t,n){console.error("Error installing update:",n),d("error","An error occurred while installing the update."),l(s)}}))}),c(document).on("click",".mds-install-extension",function(e){e.preventDefault();let s=c(this);var e=s.data("extension-id"),t=s.data("extension-slug");confirm(`üöÄ Install this extension and start boosting your results today? 

This extension is trusted by thousands of users worldwide! 

‚úÖ Free installation 
‚ö° Instant activation 
üìà Proven results`)&&(r(s,"Installing..."),c.ajax({url:MDS_EXTENSIONS_DATA.ajax_url,type:"POST",data:{action:"mds_install_extension",nonce:MDS_EXTENSIONS_DATA.nonce,extension_id:e,extension_slug:t},dataType:"json",success:function(e){e.success?(d("success","üéâ Awesome! Extension installed and ready to boost your results!"),s.removeClass("mds-btn-primary").addClass("mds-btn-active").html('<span class="mds-btn-icon">‚úì</span> Installed'),e.data.reload&&setTimeout(()=>window.location.reload(),2e3)):(d("error",e.data.message||"Failed to install extension."),l(s))},error:function(e,t,n){console.error("Error installing extension:",n),d("error","An error occurred while installing the extension."),l(s)}}))}),c(document).on("click",".mds-activate-extension",function(e){e.preventDefault();let s=c(this);var e=s.data("extension-slug"),t=s.data("nonce");confirm("‚ö° Activate this extension and start using its powerful features?")&&(r(s,"Activating..."),c.ajax({url:MDS_EXTENSIONS_DATA.ajax_url,type:"POST",data:{action:"mds_activate_extension",nonce:t,extension_slug:e},dataType:"json",success:function(e){var t;e.success?(d("success","üéâ Extension is now active and ready to use!",!1),t=c('<span class="button button-secondary mds-ext-active" disabled="disabled">Active</span>'),s.replaceWith(t)):(d("error",e.data.message||"Failed to activate extension."),l(s))},error:function(e,t,n){console.error("Error activating extension:",n),d("error","An error occurred while activating the extension."),l(s)}}))}),c(document).on("click",".mds-check-all-updates",function(e){e.preventDefault();let t=c(this),n=c("tr[data-extension-id]"),s=0,a=!1;function o(){s>=n.length&&(l(t),a?d("success","üîÑ Update check complete! Some extensions have updates available."):d("success","‚úÖ All extensions are up to date!"))}r(t,"Checking All..."),n.each(function(){let e=c(this);var t=e.find(".mds-check-updates");t.prop("disabled")?(s++,o()):(t.trigger("click"),e.off("mds-update-checked").on("mds-update-checked",function(){s++,e.find(".mds-update-available").length&&(a=!0),o()}))})}),console.log("üöÄ MDS Extensions enhanced interface loaded successfully!")});