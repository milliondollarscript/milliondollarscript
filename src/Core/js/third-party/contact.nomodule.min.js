let $a2188ba8c266b376$export$cacd6541cfeeb6c1,$a2188ba8c266b376$export$86ae6e8ac17a67c6=((e=>{e.None="0",e.Left="left",e.Right="right",e.Up="up",e.Down="down"})($a2188ba8c266b376$export$cacd6541cfeeb6c1=$a2188ba8c266b376$export$cacd6541cfeeb6c1||{}),Object.freeze({Horizontal:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right],Vertical:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down],All:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down,$a2188ba8c266b376$export$cacd6541cfeeb6c1.None]})),$a2188ba8c266b376$export$a1d3109c03b1d511;(e=>{e.Inactive="inactive",e.Active="active",e.Blocked="blocked"})($a2188ba8c266b376$export$a1d3109c03b1d511=$a2188ba8c266b376$export$a1d3109c03b1d511||{});let $a2188ba8c266b376$export$b8339a9622c147c0;(e=>{e.NoPointer="nopointer",e.SinglePointer="singlepointer",e.DualPointer="dualpointer"})($a2188ba8c266b376$export$b8339a9622c147c0=$a2188ba8c266b376$export$b8339a9622c147c0||{});let $a2188ba8c266b376$export$2fb579dd5dfdbea;(e=>{e.NoActiveGesture="noactivegesture",e.ActiveGesture="activegesture"})($a2188ba8c266b376$export$2fb579dd5dfdbea=$a2188ba8c266b376$export$2fb579dd5dfdbea||{});class $07c7ab2351895186$export$baf26146a414f24a{constructor(e,t){this.x=e,this.y=t}}class $c0ee1a209fd4fc8d$export$9b781de7bf37bf48{constructor(e,t){this.startPoint=e,this.endPoint=t,this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None,this.deltaX=this.endPoint.x-this.startPoint.x,this.deltaY=this.endPoint.y-this.startPoint.y,this.x=this.deltaX,this.y=this.deltaY,this.vectorLength=Math.sqrt(Math.pow(this.deltaX,2)+Math.pow(this.deltaY,2)),Math.abs(this.deltaX)>Math.abs(this.deltaY)?this.startPoint.x<this.endPoint.x?this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right:this.startPoint.x>this.endPoint.x&&(this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left):this.startPoint.y<this.endPoint.y?this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down:this.startPoint.y>this.endPoint.y&&(this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up)}}class $1f7944f1763e45ce$export$2db6c17465f94a2{static getVector(e,t){e=new $07c7ab2351895186$export$baf26146a414f24a(e.clientX,e.clientY),t=new $07c7ab2351895186$export$baf26146a414f24a(t.clientX,t.clientY);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e,t)}static getSpeed(e,t,i){let n=0;i=(i-t)/1e3;return n=null!=e&&0!=i?e.vectorLength/i:n}static calculateRotationAngle(e,t){var i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint),e=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint),t=new $07c7ab2351895186$export$baf26146a414f24a(0,0),n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(i.startPoint,t),i=this.translatePoint(i.endPoint,n),n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t),t=this.translatePoint(e.endPoint,n),e=-1*this.calcAngleRad(i),n=t.x*Math.cos(e)-t.y*Math.sin(e),i=Math.round(t.x*Math.sin(e)+t.y*Math.cos(e));return 180*Math.atan2(i,n)/Math.PI}static calculateVectorAngle(e,t){let i=0;return 0<e.vectorLength&&0<t.vectorLength&&(e=(e.x*t.x+e.y*t.y)/(e.vectorLength*t.vectorLength),t=Math.acos(e),i=this.rad2deg(t)),i}static translatePoint(e,t){var i=e.x+t.x,e=e.y+t.y;return new $07c7ab2351895186$export$baf26146a414f24a(i,e)}static calcAngleDegrees(e){let t=180*Math.atan2(e.y,e.x)/Math.PI;return t=t<0?360+t:t}static calcAngleRad(e){let t=Math.atan2(e.y,e.x);return t=t<0?2*Math.PI+t:t}static deg2rad(e){return Math.PI/180*e}static rad2deg(e){return e/(Math.PI/180)}static getCenter(e,t){var i=(e.x+t.x)/2,e=(e.y+t.y)/2;return new $07c7ab2351895186$export$baf26146a414f24a(i,e)}static getCenterMovementVector(e,t){var i=this.getCenter(e.startPoint,t.startPoint),e=this.getCenter(e.endPoint,t.endPoint);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(i,e)}static calculateDistanceChange(e,t){var i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint).vectorLength-i.vectorLength}static calculateAbsoluteDistanceChange(e,t){e=this.calculateDistanceChange(e,t);return Math.abs(e)}static calculateRelativeDistanceChange(e,t){var i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint).vectorLength/i.vectorLength}}let $d25d2392b002d8dc$export$573b9b62d5ae28f7;(e=>{e.Active="active",e.Removed="removed",e.Canceled="canceled"})($d25d2392b002d8dc$export$573b9b62d5ae28f7=$d25d2392b002d8dc$export$573b9b62d5ae28f7||{});class $d25d2392b002d8dc$export$b56007f12edf0c17{constructor(e,t){this.options={DEBUG:!1,...t},this.DEBUG=this.options.DEBUG;t=(new Date).getTime(),this.pointerId=e.pointerId,this.vectorTimespan=this.options.vectorTimespan??100,this.initialPointerEvent=e,this.currentPointerEvent=e,this.recognizedEvents=[e],this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Active,e=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(e,e),t={startX:this.initialPointerEvent.clientX,startY:this.initialPointerEvent.clientY,vector:e,deltaX:0,deltaY:0,startTimestampUTC:t,startTimestamp:this.initialPointerEvent.timeStamp,currentTimestamp:this.initialPointerEvent.timeStamp,endTimestamp:null,maximumSpeed:0,currentSpeed:0,distance:0,maximumDistance:0,averageSpeed:0,finalSpeed:0,traveledDistance:0,hasBeenMoved:!1,duration:0};this.parameters={global:t,live:{duration:0,speed:0,vector:e,distance:0,isMoving:!1}}}getTarget(){return this.initialPointerEvent.target}reset(){}onIdle(){var e=(new Date).getTime()-this.parameters.global.startTimestampUTC;this.parameters.global.duration=e}onPointerMove(e){this.parameters.global.hasBeenMoved=!0,this.parameters.live.isMoving=!0,this.update(e)}onPointerUp(e){this.parameters.global.finalSpeed=this.parameters.live.speed,this.parameters.live.speed=0,this.parameters.live.isMoving=!1,this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Removed,this.parameters.global.endTimestamp=e.timeStamp,this.update(e),!0===this.DEBUG&&console.log(`[PointerInput] pointerdown ended. pointerdown duration: ${this.parameters.global.duration}ms`)}onPointerLeave(e){this.onPointerUp(e)}onPointerCancel(e){this.update(e),this.parameters.live.speed=0,this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Canceled,this.parameters.live.isMoving=!1,this.parameters.global.endTimestamp=e.timeStamp,!0===this.DEBUG&&console.log(`[PointerInput] canceled, pointerdown duration:${this.parameters.global.duration}ms`)}update(e){this.currentPointerEvent=e,this.recognizedEvents.push(e);var t=this.getTimedPointerEvents(),i=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(t[0],t[1]),t=(this.parameters.live.vector=i,this.parameters.live.distance=i.vectorLength,this.parameters.live.speed=$1f7944f1763e45ce$export$2db6c17465f94a2.getSpeed(i,t[0].timeStamp,t[1].timeStamp),this.parameters.live.speed>this.parameters.global.maximumSpeed&&(this.parameters.global.maximumSpeed=this.parameters.live.speed),this.parameters.global.currentTimestamp=e.timeStamp,this.parameters.global.duration=e.timeStamp-this.parameters.global.startTimestamp,this.parameters.global.deltaX=i.endPoint.x-this.parameters.global.startX,this.parameters.global.deltaY=i.endPoint.y-this.parameters.global.startY,$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(this.initialPointerEvent,this.currentPointerEvent));this.parameters.global.vector=t,this.parameters.global.distance=t.vectorLength,t.vectorLength>this.parameters.global.maximumDistance&&(this.parameters.global.maximumDistance=t.vectorLength),!0===this.DEBUG&&(console.log(`[PointerInput] current speed: ${this.parameters.live.speed}px/s`),console.log(`[PointerInput] pointerdown duration: ${this.parameters.global.duration}ms`),console.log(`[PointerInput] live vector length within vectorTimespan: ${this.parameters.live.vector.vectorLength}px`))}getTimedPointerEvents(){let e=this.initialPointerEvent;var t=this.recognizedEvents[this.recognizedEvents.length-1];let i=this.recognizedEvents.length-1,n=0;for(var r=t.timeStamp;n<this.vectorTimespan&&!((i-=1)<0);)e=this.recognizedEvents[i],n=r-e.timeStamp;t=[e,t];return this.recognizedEvents=this.recognizedEvents.slice(-20),t}}class $5fe7e4b452e08fad$export$bbcc47898202c6b8{constructor(e){this.pointer=e,this.parameters=e.parameters}getTarget(){return this.pointer.initialPointerEvent.target}getCurrentPointerEvent(){return this.pointer.currentPointerEvent}getCurrentDirection(){return this.parameters.live.vector.direction}onIdle(){}onPointerMove(e){}onPointerUp(e){}onPointerLeave(e){}onPointerCancel(e){}}let $24f1c062f8ef0b30$var$window=globalThis.window,$24f1c062f8ef0b30$export$9d2aa32114ab0612;$24f1c062f8ef0b30$export$9d2aa32114ab0612=$24f1c062f8ef0b30$var$window?.CustomEvent?$24f1c062f8ef0b30$var$window.CustomEvent:class extends Event{constructor(e,t){super(e,t),this.detail=t?.detail}initCustomEvent(){throw new Error("Unsupported deprecated method")}};class $f752273e736c5336$export$6e9c3b1e1fa2b597 extends $24f1c062f8ef0b30$export$9d2aa32114ab0612{}class $f752273e736c5336$export$61ce360501d38a6f{constructor(e,t){this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive,this.validPointerManagerState=null,this.validPointerInputConstructor=$5fe7e4b452e08fad$export$bbcc47898202c6b8,this.domElement=e,this.initialPointerEvent=null,this.initialParameters=null,this.activeStateParameters=null,this.options={bubbles:!0,blocks:[],supportedDirections:[],supportedButtons:[],DEBUG:!1,...t},this.DEBUG=this.options.DEBUG}getEmptyGestureParameters(){return{global:{min:{},max:{},boolean:{}},live:{min:{},max:{},boolean:{}}}}getGestureParameters(){let e;if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active?(e=this.activeStateParameters,1==this.DEBUG&&(console.log(`[${this.eventBaseName}] validating using activeStateParameters`),console.log(e))):(1==this.DEBUG&&console.log(`[${this.eventBaseName}] validating using initialParameters`),e=this.initialParameters),null==e)throw new Error("[Gesture] no gesture parameters found. Do not call .getGestureParameters on abstract class Gesture");return e}validateGestureParameters(e){var i=this.getGestureParameters();let n=!0,r;for(r in i){var a=i[r],o=e.parameters[r];let t;for(t in a){var s=a[t];let e;for(e in s){var c=s[e],l=o[e];if(1==this.DEBUG&&console.log(`[${this.eventBaseName}] validating ${r} ${t}: required: ${c}, pointer: `+l),"boolean"==typeof c&&"boolean"==typeof l?n=this.validateBooleanParameter(c,l):"number"==typeof c&&"number"==typeof l&&(n=this.validateMinMaxParameter(c,l,t)),0==n)return 1==this.DEBUG&&console.log(`[${this.eventBaseName}] invalidated `),!1}}}return!0}validateBooleanParameter(e,t){return null==e||(e==t?(1==this.DEBUG&&console.log(`validated: required value: ${e}, current value: `+t),!0):(1==this.DEBUG&&console.log(`dismissing ${this.eventBaseName}: required value: ${e}, current value: `+t),!1))}validateMinMaxParameter(e,t,i){if("min"==i){if(e<=t)return!0}else if("max"==i&&t<=e)return!0;return!1}validateDirection(e){e=e.getCurrentDirection();return!(this.options.supportedDirections.length&&!this.options.supportedDirections.includes(e)&&(1==this.DEBUG&&console.log(`[Gestures] dismissing ${this.eventBaseName}: supported directions: ${this.options.supportedDirections}, current direction: `+e),1))}validateGestureState(){return this.state!=$a2188ba8c266b376$export$a1d3109c03b1d511.Blocked}validatePointerManagerState(e){return e.state==this.validPointerManagerState||(1==this.DEBUG&&console.log(`[Gesture] PointerManagerState invalidated ${this.eventBaseName}: `+e.state),!1)}validatePointerInputConstructor(e){return e instanceof this.validPointerInputConstructor||(1==this.DEBUG&&console.log(`[Gesture] PointerInputConstructor invalidated ${this.eventBaseName}: `+this.validPointerInputConstructor),!1)}validate(e){let t=this.validateGestureState();1==t&&(t=this.validatePointerManagerState(e));e=e.activePointerInput;return t=1==t&&null!=e&&1==(t=1==(t=this.validatePointerInputConstructor(e))?this.validateDirection(e):t)?this.validateGestureParameters(e):t}recognize(e){var t=this.validate(e);1==t&&this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive&&this.onStart(e),1==t&&this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active?(null==this.initialPointerEvent&&this.setInitialPointerEvent(e),this.emit(e)):this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&0==t?this.onEnd(e):1==this.DEBUG&&console.log(`not firing event ${this.eventBaseName}. No SinglePointerInput found`)}getPointerInput(e){if(1==e.hasPointersOnSurface()&&e.activePointerInput instanceof this.validPointerInputConstructor)return e.activePointerInput;if(e.lastRemovedPointer instanceof $d25d2392b002d8dc$export$b56007f12edf0c17){e=e.getlastRemovedPointerInput();if(e instanceof this.validPointerInputConstructor)return e}return null}setInitialPointerEvent(e){var e=this.getPointerInput(e);e instanceof this.validPointerInputConstructor&&(e=e.getCurrentPointerEvent(),this.initialPointerEvent=e)}emit(e,t){t=t||this.eventBaseName,!0===this.DEBUG&&console.log("[Gestures] detected and firing event "+t);var i=this.getPointerInput(e);if(null!=i){var n=i.getTarget();if(n instanceof EventTarget){var i=this.getEventData(i,e),r={detail:i,bubbles:this.options.bubbles},e=(!0===this.DEBUG&&console.log(r),new $f752273e736c5336$export$6e9c3b1e1fa2b597(t,r)),a=((1==r.bubbles?n:this.domElement).dispatchEvent(e),i.live.direction);if(1==!!this.options.supportedDirections&&a!=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None&&(t==this.eventBaseName||"swipe"==t))for(let e=0;e<this.options.supportedDirections.length;e++){var o=this.options.supportedDirections[e];o==a&&(o=t+o,1==this.DEBUG&&console.log("[Gestures] detected and firing event "+o),o=new $f752273e736c5336$export$6e9c3b1e1fa2b597(o,r),(1==r.bubbles?n:this.domElement).dispatchEvent(o))}}}}onStart(e){this.blockGestures(),this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Active,this.setInitialPointerEvent(e);var t=this.eventBaseName+"start";this.emit(e,t)}onEnd(e){this.unblockGestures(),1==this.DEBUG&&console.log(`[${this.eventBaseName}] ended. Setting ${this.eventBaseName}.state = `+$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive),this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive;var t=this.eventBaseName+"end";this.emit(e,t)}onTouchStart(e){}onTouchMove(e){}onTouchEnd(e){}onTouchCancel(e){}block(e){-1==this.options.blocks.indexOf(e)&&this.options.blocks.push(e)}unblock(e){-1!=this.options.blocks.indexOf(e)&&this.options.blocks.splice(this.options.blocks.indexOf(e),1)}blockGestures(){for(let e=0;e<this.options.blocks.length;e++){var t=this.options.blocks[e];t.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive&&(0==this.DEBUG&&console.log("[Gesture] blocking "+t.eventBaseName),t.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Blocked)}}unblockGestures(){for(let e=0;e<this.options.blocks.length;e++)this.options.blocks[e].state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive}getEventData(e,t){throw new Error("Gesture subclasses require a getEventData method()")}}class $e8978caba4d46d00$export$718b85c80185d86e extends $f752273e736c5336$export$61ce360501d38a6f{constructor(e,t){super(e,t),this.initialPointerEvent=null,this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer;e=this.getEmptyGestureParameters();this.initialParameters={...e},this.activeStateParameters=JSON.parse(JSON.stringify({...e}))}getEventData(e,t){var i,n,r=e.parameters.live,a=e.parameters.live;let o=r.vector,s=r.duration;return null!=this.initialPointerEvent&&(i=new $07c7ab2351895186$export$baf26146a414f24a(this.initialPointerEvent.clientX,this.initialPointerEvent.clientY),n=new $07c7ab2351895186$export$baf26146a414f24a(e.pointer.currentPointerEvent.clientX,e.pointer.currentPointerEvent.clientY),o=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(i,n),s=e.pointer.currentPointerEvent.timeStamp-this.initialPointerEvent.timeStamp),{recognizer:this,global:{deltaX:o.x,deltaY:o.y,distance:o.vectorLength,speedX:o.x/s,speedY:o.y/s,speed:o.vectorLength/s,direction:o.direction,scale:1,rotation:0,center:{x:r.vector.endPoint.x,y:r.vector.endPoint.y},srcEvent:e.pointer.currentPointerEvent},live:{deltaX:a.vector.x,deltaY:a.vector.y,distance:a.vector.vectorLength,speedX:a.vector.x/e.pointer.vectorTimespan,speedY:a.vector.y/e.pointer.vectorTimespan,speed:a.speed,direction:a.vector.direction,scale:1,rotation:0,center:{x:a.vector.endPoint.x,y:a.vector.endPoint.y},srcEvent:e.pointer.currentPointerEvent},pointerManager:t}}validateButton(t){if(0<this.options.supportedButtons.length){var i=t.activePointerInput,t=t.lastRemovedPointer;let e=null;if(null!=i?e=i.getCurrentPointerEvent():null!=t&&(e=t.currentPointerEvent),null!=e&&"mouse"==e.pointerType&&-1==this.options.supportedButtons.indexOf(e.buttons))return 1==this.DEBUG&&console.log(`dismissing ${this.eventBaseName}: supportedButtons: ${this.options.supportedButtons.toString()}, poinerEvent.buttons: `+e.buttons),!1}return!0}validate(e){let t=this.validateButton(e);return t=1==t?super.validate(e):t}}class $b6ec4e8a6d9d51ec$export$4451a18ddc7083b7 extends $e8978caba4d46d00$export$718b85c80185d86e{constructor(e,t){super(e,t),this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer,this.eventBaseName="tap";let i=499,n=30,r=30;t&&("maxDuration"in t&&(i=t.maxDuration),"maxDistance"in t)&&(n=t.maxDistance,r=t.maxDistance),this.initialParameters.global.max.duration=i,this.initialParameters.live.max.distance=n,this.initialParameters.global.max.distance=r}validateButton(e){if(0<this.options.supportedButtons.length){e=e.lastRemovedPointer;if(null!=e){e=e.currentPointerEvent;if("mouse"==e.pointerType&&-1==this.options.supportedButtons.indexOf(e.button))return 1==this.DEBUG&&console.log(`dismissing ${this.eventBaseName}: supportedButtons: ${this.options.supportedButtons.toString()}, poinerEvent.button: `+e.button),!1}}return!0}validate(e){let t=this.validateGestureState();if(!0===(t=1==(t=1==t?this.validatePointerManagerState(e):t)?this.validateButton(e):t)){if(1!=e.lastInputSessionPointerCount)return!1;e=e.getlastRemovedPointerInput();t=e instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8&&this.validateGestureParameters(e)}return t}onStart(e){this.setInitialPointerEvent(e),this.emit(e)}}class $5653a1f5fdc2db30$export$90610caf6d8d0242 extends $e8978caba4d46d00$export$718b85c80185d86e{static minDuration=500;constructor(e,t){super(e,t),this.eventBaseName="press";let i=500,n=10,r=20;t&&("minDuration"in t&&(i=t.minDuration),"maxDistance"in t)&&(r=t.maxDistance,n=t.maxDistance),this.initialParameters.global.min.duration=i,this.initialParameters.global.max.distance=n,this.initialParameters.global.max.maximumDistance=r,this.hasBeenEmitted=!1}recognize(e){var t=this.validate(e),i=this.getPointerInput(e),n=this.initialParameters.global.min.duration||$5653a1f5fdc2db30$export$90610caf6d8d0242.minDuration;i instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8&&(1==t&&0==this.hasBeenEmitted?(this.setInitialPointerEvent(e),this.emit(e),this.hasBeenEmitted=!0,this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Active,this.blockGestures()):0==t&&1==this.hasBeenEmitted?(this.onEnd(e),this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive,this.hasBeenEmitted=!1):(t=i.parameters.global.duration,1==this.hasBeenEmitted&&t<=n&&(this.hasBeenEmitted=!1))),null==i&&(this.hasBeenEmitted=!1)}}class $7a0f7fd2f33d0212$export$f86166cd6057c2d1 extends $e8978caba4d46d00$export$718b85c80185d86e{constructor(e,t){super(e,t),this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer,this.eventBaseName="pan",this.initialParameters.global.min.duration=0,this.initialParameters.live.min.distance=10,this.initialParameters.global.boolean.hasBeenMoved=!0,this.swipeFinalSpeed=600,this.isSwipe=!1,this.options.supportedDirections=t?.supportedDirections??$a2188ba8c266b376$export$86ae6e8ac17a67c6.All,this.initialSupportedDirections=this.options.supportedDirections}validate(e){return this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&(this.options.supportedDirections=$a2188ba8c266b376$export$86ae6e8ac17a67c6.All),super.validate(e)}onStart(e){this.isSwipe=!1,super.onStart(e)}onEnd(e){var t=e.getlastRemovedPointerInput();t instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8&&(this.swipeFinalSpeed<t.parameters.global.finalSpeed&&t.parameters.live.vector.direction!=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None?(this.isSwipe=!0,this.emit(e,"swipe")):1==this.DEBUG&&(t.parameters.global.finalSpeed<this.swipeFinalSpeed?console.log(`[Pan] dismissing swipe. Final speed: ${t.parameters.global.finalSpeed} < `+this.swipeFinalSpeed):console.log("[Pan] dismissing swipe. Direction: "+t.parameters.live.vector.direction))),super.onEnd(e),this.options.supportedDirections=this.initialSupportedDirections}onTouchMove(e){this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&(1==this.DEBUG&&console.log("[Pan] preventing touchmove default"),e.preventDefault(),e.stopPropagation())}}class $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1{constructor(e,t){this.pointerIds=new Set([e.pointerId,t.pointerId]),this.startTimestamp=(new Date).getTime(),this.pointerMap={},this.pointerMap[e.pointerId]=e,this.pointerMap[t.pointerId]=t,this.pointer_1=e,this.pointer_2=t,this.initialPointerEvent=e.initialPointerEvent,this.currentPointerEvent=e.initialPointerEvent;var t=this.pointer_1.parameters.global.vector,e=this.pointer_2.parameters.global.vector,t={duration:0,center:$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(t.startPoint,e.startPoint),centerHasBeenMoved:!1,centerMovementDistance:0,centerMovementVector:$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(t,e),absolutePointerDistanceChange:0,relativePointerDistanceChange:0,rotationAngle:0,absoluteRotationAngle:0,vectorAngle:0,absoluteVectorAngle:0},e=this.pointer_1.parameters.live.vector,i=this.pointer_2.parameters.live.vector,n=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(e.startPoint,i.startPoint),e=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(e,i);this.parameters={global:t,live:{center:n,centerIsMoving:!1,centerMovementDistance:0,centerMovementVector:e,absolutePointerDistanceChange:0,relativePointerDistanceChange:0,rotationAngle:0,absoluteRotationAngle:0,vectorAngle:0,absoluteVectorAngle:0}}}removePointer(e){if(e==this.pointer_1.pointerId)return this.pointer_2;if(e==this.pointer_2.pointerId)return this.pointer_1;throw new Error(`[DualPointerInput] cannot remove Pointer #${e}. The pointer is not part of this DualPointerInput`)}getTarget(){return this.initialPointerEvent.target}update(e){e instanceof PointerEvent&&(this.currentPointerEvent=e);var e=(new Date).getTime(),e=(this.parameters.global.duration=e-this.startTimestamp,this.pointer_1.parameters.global.vector),t=this.pointer_2.parameters.global.vector,i=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(e.startPoint,t.startPoint),n=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(e,t),r=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateAbsoluteDistanceChange(e,t),a=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRelativeDistanceChange(e,t),o=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRotationAngle(e,t),e=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateVectorAngle(e,t),t=(this.parameters.global.center=i,this.parameters.global.centerMovementVector=n,this.parameters.global.centerMovementDistance=n.vectorLength,this.parameters.global.absolutePointerDistanceChange=r,this.parameters.global.relativePointerDistanceChange=a,this.parameters.global.rotationAngle=o,this.parameters.global.absoluteRotationAngle=Math.abs(o),this.parameters.global.vectorAngle=e,this.parameters.global.absoluteVectorAngle=Math.abs(e),this.pointer_1.parameters.live.vector),i=this.pointer_2.parameters.live.vector,n=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(t.startPoint,i.startPoint),r=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(t,i),a=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateAbsoluteDistanceChange(t,i),o=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRelativeDistanceChange(t,i),e=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRotationAngle(t,i),t=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateVectorAngle(t,i);0<r.vectorLength?(this.parameters.live.centerIsMoving=!0,this.parameters.global.centerHasBeenMoved=!0):this.parameters.live.centerIsMoving=!1,this.parameters.live.center=n,this.parameters.live.centerMovementDistance=r.vectorLength,this.parameters.live.centerMovementVector=r,this.parameters.live.absolutePointerDistanceChange=a,this.parameters.live.relativePointerDistanceChange=o,this.parameters.live.rotationAngle=e,this.parameters.live.absoluteRotationAngle=Math.abs(e),this.parameters.live.vectorAngle=t,this.parameters.live.absoluteVectorAngle=Math.abs(t)}onPointerMove(e){this.update(e)}onPointerUp(e){this.update(e)}onPointerLeave(e){this.update(e)}onPointerCancel(e){this.update(e)}onIdle(){this.update()}getCurrentDirection(){return this.parameters.live.centerMovementVector.direction}getCurrentPointerEvent(){return this.currentPointerEvent}}class $a1a4c2869495e604$export$f9d89efe4b7795e7 extends $f752273e736c5336$export$61ce360501d38a6f{constructor(e,t){super(e,t),this.initialPointerEvent_1=null,this.initialPointerEvent_2=null,this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.DualPointer,this.validPointerInputConstructor=$ba0aae203ff6b3f9$export$bdba51b3ce92d5f1;e=this.getEmptyGestureParameters();this.initialParameters={...e},this.activeStateParameters=JSON.parse(JSON.stringify({...e}))}getEventData(e,t){var i=e.parameters.global,n=e.parameters.live;return{recognizer:this,global:{deltaX:i.centerMovementVector.x,deltaY:i.centerMovementVector.y,distance:i.centerMovementDistance,speedX:i.centerMovementVector.x/i.duration,speedY:i.centerMovementVector.y/i.duration,speed:i.centerMovementVector.vectorLength/i.duration,direction:i.centerMovementVector.direction,scale:i.relativePointerDistanceChange,rotation:i.rotationAngle,center:i.center,srcEvent:e.currentPointerEvent},live:{deltaX:n.centerMovementVector.x,deltaY:n.centerMovementVector.y,distance:n.centerMovementDistance,speedX:n.centerMovementVector.x/i.duration,speedY:n.centerMovementVector.y/i.duration,speed:n.centerMovementVector.vectorLength/i.duration,direction:n.centerMovementVector.direction,scale:n.relativePointerDistanceChange,rotation:n.rotationAngle,center:{x:n.centerMovementVector.startPoint.x,y:n.centerMovementVector.startPoint.y},srcEvent:e.currentPointerEvent},pointerManager:t}}}class $ed7931f1d96d5294$export$826ae541ddf1527b extends $a1a4c2869495e604$export$f9d89efe4b7795e7{constructor(e,t){super(e,t),this.eventBaseName="pinch",this.initialParameters.live.min.centerMovementDistance=0,this.initialParameters.live.max.centerMovementDistance=50,this.initialParameters.live.min.absolutePointerDistanceChange=5,this.initialParameters.live.max.absoluteRotationAngle=20,this.initialParameters.live.min.absoluteVectorAngle=10}}class $9fe2bb90b337f66c$export$152db69a76b6b79e extends $a1a4c2869495e604$export$f9d89efe4b7795e7{constructor(e,t){super(e,t),this.eventBaseName="rotate",this.initialParameters.live.min.centerMovementDistance=0,this.initialParameters.live.max.centerMovementDistance=50,this.initialParameters.live.max.absolutePointerDistanceChange=50,this.initialParameters.live.min.absoluteRotationAngle=5,this.activeStateParameters.live.min.absoluteRotationAngle=0}}class $59226122237c359c$export$8847187e02a498e8 extends $a1a4c2869495e604$export$f9d89efe4b7795e7{constructor(e,t){super(e,t),this.eventBaseName="twofingerpan",this.initialParameters.live.min.centerMovementDistance=10,this.initialParameters.live.max.absolutePointerDistanceChange=50,this.initialParameters.live.max.absoluteVectorAngle=150,this.activeStateParameters.live.min.centerMovementDistance=0}}class $4f5a7b355079efa2$export$af6d1be017a420a{constructor(e){this.options={DEBUG:!1,...e=e||{}},this.DEBUG=this.options.DEBUG,this.state=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer,this.activePointerInput=null,this.lastRemovedPointer=null,this.lastInputSessionPointerCount=0,this.pointerAllocation={},this.unusedPointers={},this.onSurfacePointers={}}addPointer(e){1==this.DEBUG&&console.log("[PointerManager] adding Pointer #"+e.pointerId.toString());var t={DEBUG:this.DEBUG},e=new $d25d2392b002d8dc$export$b56007f12edf0c17(e,t);this.onSurfacePointers[e.pointerId]=e,null==this.activePointerInput?this.setActiveSinglePointerInput(e):this.activePointerInput instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8?this.setActiveDualPointerInput(this.activePointerInput.pointer,e):this.activePointerInput instanceof $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1&&(this.unusedPointers[e.pointerId]=e),this.lastInputSessionPointerCount=this.currentPointerCount()}removePointer(e){1==this.DEBUG&&(console.log("[PointerManager] starting to remove Pointer #"+e),console.log("[PointerManager] state: "+this.state));var t,i=this.onSurfacePointers[e];if(this.lastRemovedPointer=i,delete this.onSurfacePointers[e],e in this.unusedPointers&&delete this.unusedPointers[e],this.activePointerInput instanceof $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1)this.activePointerInput.pointerIds.has(e)&&(1==this.DEBUG&&console.log(`[PointerManager] removing Pointer #${e} from DualPointerInput`),i=this.activePointerInput.removePointer(e),this.activePointerInput=null,(t=this.getUnusedPointer())instanceof $d25d2392b002d8dc$export$b56007f12edf0c17?this.setActiveDualPointerInput(i,t):this.setActiveSinglePointerInput(i));else if(this.activePointerInput instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8){if(1==this.DEBUG&&console.log(`[PointerManager] removing Pointer #${e} from SinglePointerInput`),this.activePointerInput=null,this.state=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer,0<Object.keys(this.unusedPointers).length)throw this.unusedPointers={},new Error("[PointerManager] found unused Pointers although there should not be any");if(0<Object.keys(this.onSurfacePointers).length)throw this.onSurfacePointers={},new Error("[PointerManager] found onSurfacePointers although there should not be any")}1==this.DEBUG&&console.log("[PointerManager] state: "+this.state)}setActiveSinglePointerInput(e){e.reset();var t=new $5fe7e4b452e08fad$export$bbcc47898202c6b8(e);this.activePointerInput=t,this.pointerAllocation[e.pointerId]=t,delete this.unusedPointers[e.pointerId],this.state=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer,1==this.DEBUG&&console.log("[PointerManager] state: "+this.state)}setActiveDualPointerInput(e,t){e.reset(),t.reset();var i=new $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1(e,t);this.activePointerInput=i,this.pointerAllocation[e.pointerId]=i,this.pointerAllocation[t.pointerId]=i,delete this.unusedPointers[e.pointerId],delete this.unusedPointers[t.pointerId],this.state=$a2188ba8c266b376$export$b8339a9622c147c0.DualPointer,1==this.DEBUG&&console.log("[PointerManager] state: "+this.state)}hasPointersOnSurface(){return 0<Object.keys(this.onSurfacePointers).length}currentPointerCount(){return Object.keys(this.onSurfacePointers).length}getUnusedPointer(){return 0<Object.keys(this.unusedPointers).length?Object.values(this.unusedPointers)[0]:null}getPointerFromId(e){return e in this.onSurfacePointers?this.onSurfacePointers[e]:null}getlastRemovedPointerInput(){return this.lastRemovedPointer instanceof $d25d2392b002d8dc$export$b56007f12edf0c17?this.pointerAllocation[this.lastRemovedPointer.pointerId]:null}onIdle(){for(var e in this.onSurfacePointers)this.onSurfacePointers[e].onIdle();this.activePointerInput?.onIdle()}onPointerMove(e){var t=this.getPointerFromId(e.pointerId);t instanceof $d25d2392b002d8dc$export$b56007f12edf0c17&&t.onPointerMove(e),this.activePointerInput?.onPointerMove(e)}onPointerUp(e){1==this.DEBUG&&console.log("[PointerManager] pointerup detected");var t=this.getPointerFromId(e.pointerId);t instanceof $d25d2392b002d8dc$export$b56007f12edf0c17&&t.onPointerUp(e),this.activePointerInput?.onPointerUp(e),this.removePointer(e.pointerId)}onPointerCancel(e){1==this.DEBUG&&console.log("[PointerManager] pointercancel detected");var t=this.getPointerFromId(e.pointerId);t instanceof $d25d2392b002d8dc$export$b56007f12edf0c17&&t.onPointerCancel(e),this.activePointerInput?.onPointerCancel(e),this.removePointer(e.pointerId)}}let $03c52e54621b9b86$var$ALL_GESTURE_CLASSES=[$b6ec4e8a6d9d51ec$export$4451a18ddc7083b7,$5653a1f5fdc2db30$export$90610caf6d8d0242,$7a0f7fd2f33d0212$export$f86166cd6057c2d1,$ed7931f1d96d5294$export$826ae541ddf1527b,$9fe2bb90b337f66c$export$152db69a76b6b79e,$59226122237c359c$export$8847187e02a498e8];class $03c52e54621b9b86$export$9371bd96776f4e82{constructor(i,e){this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture,this.activeGestures=[],this.hadActiveGestureDuringCurrentContact=!1,this.gestureEventHandlers={},this.lastRecognitionTimestamp=null,this.idleRecognitionIntervalId=null,this.pointerEventHandlers={},this.touchEventHandlers={},this.options={DEBUG:!1,DEBUG_GESTURES:!1,DEBUG_POINTERMANAGER:!1,bubbles:!0,handleTouchEvents:!0,consecutiveGestures:!0,simultaneousGestures:!0,supportedGestures:[],...e=e||{}},this.DEBUG=this.options.DEBUG;e=(e.supportedGestures??$03c52e54621b9b86$var$ALL_GESTURE_CLASSES).map(e=>{var t;if("function"==typeof e)return t={bubbles:this.options.bubbles,DEBUG:this.options.DEBUG_GESTURES},new e(i,t);if("object"==typeof e)return e;throw new Error("unsupported gesture type: "+typeof e)}),this.supportedGestures=e,this.domElement=i,e={DEBUG:this.options.DEBUG_POINTERMANAGER};this.pointerManager=new $4f5a7b355079efa2$export$af6d1be017a420a(e),this.addPointerEventListeners(),this.addTouchEventListeners()}addPointerEventListeners(){var e=this.domElement,t=this.onPointerDown.bind(this),i=this.onPointerMove.bind(this),n=this.onPointerUp.bind(this),r=this.onPointerCancel.bind(this);e.addEventListener("pointerdown",t,{passive:!0}),e.addEventListener("pointermove",i,{passive:!0}),e.addEventListener("pointerup",n,{passive:!0}),e.addEventListener("pointercancel",r,{passive:!0}),this.pointerEventHandlers={pointerdown:t,pointermove:i,pointerup:n,pointercancel:r}}onPointerDown(e){1==this.DEBUG&&console.log("[PointerListener] pointerdown event detected"),(e.target||this.domElement).setPointerCapture(e.pointerId),this.pointerManager.addPointer(e),this.options.pointerdown?.(e,this),null!=this.idleRecognitionIntervalId&&this.clearIdleRecognitionInterval(),this.idleRecognitionIntervalId=setInterval(()=>{this.onIdle()},100)}onPointerMove(e){1==this.pointerManager.hasPointersOnSurface()&&(this.pointerManager.onPointerMove(e),this.recognizeGestures(),this.options.pointermove?.(e,this))}onPointerUp(e){1==this.DEBUG&&console.log("[PointerListener] pointerup event detected"),this.domElement.releasePointerCapture(e.pointerId),1==this.pointerManager.hasPointersOnSurface()&&(this.pointerManager.onPointerUp(e),this.recognizeGestures(),this.options.pointerup?.(e,this)),this.clearIdleRecognitionInterval()}onPointerCancel(e){this.domElement.releasePointerCapture(e.pointerId),1==this.DEBUG&&console.log("[PointerListener] pointercancel detected"),this.pointerManager.onPointerCancel(e),this.recognizeGestures(),this.clearIdleRecognitionInterval(),this.options.pointercancel?.(e,this)}removePointerEventListeners(){for(var e in this.pointerEventHandlers){var t=this.pointerEventHandlers[e];this.domElement.removeEventListener(e,t)}}addTouchEventListeners(){var e;1==this.options.handleTouchEvents&&(e=this.onTouchMove.bind(this),this.domElement.addEventListener("touchmove",e),this.touchEventHandlers.touchmove=e)}removeTouchEventListeners(){for(var e in this.touchEventHandlers){var t=this.touchEventHandlers[e];this.domElement.removeEventListener(e,t)}}onTouchMove(t){for(let e=0;e<this.supportedGestures.length;e++)this.supportedGestures[e].onTouchMove(t)}onIdle(){if(0==this.pointerManager.hasPointersOnSurface())this.clearIdleRecognitionInterval();else{var t=(new Date).getTime();let e=null;(null==(e=null!=this.lastRecognitionTimestamp?t-this.lastRecognitionTimestamp:e)||100<e)&&(this.pointerManager.onIdle(),1==this.DEBUG&&console.log("[PointerListener] onIdle - running idle recognition"),this.recognizeGestures())}}clearIdleRecognitionInterval(){null!=this.idleRecognitionIntervalId&&(clearInterval(this.idleRecognitionIntervalId),this.idleRecognitionIntervalId=null)}recognizeGestures(){this.lastRecognitionTimestamp=(new Date).getTime();let t=this.supportedGestures;0==this.options.simultaneousGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture||0==this.options.consecutiveGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture?t=[this.activeGestures[0]]:0==this.options.consecutiveGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture&&1==this.hadActiveGestureDuringCurrentContact&&1==this.pointerManager.hasPointersOnSurface()&&(t=[]);for(let e=0;e<t.length;e++){var i=t[e];if(i.recognize(this.pointerManager),this.updateActiveGestures(i),0==this.options.simultaneousGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture)break}1==this.DEBUG&&console.log("[PointerListener] hadActiveGestureDuringCurrentContact: "+this.hadActiveGestureDuringCurrentContact),0==this.pointerManager.hasPointersOnSurface()&&(this.hadActiveGestureDuringCurrentContact=!1)}updateActiveGestures(e){e.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active?(this.hadActiveGestureDuringCurrentContact=!0,this.activeGestures.indexOf(e)<0&&this.activeGestures.push(e)):0<=(e=this.activeGestures.indexOf(e))&&this.activeGestures.splice(e,1),0<this.activeGestures.length?this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture:this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture}parseEventsString(e){return e.trim().split(/\s+/g)}on(e,t){var i=this.parseEventsString(e);for(let e=0;e<i.length;e++){var n=i[e];n in this.gestureEventHandlers||(this.gestureEventHandlers[n]=[]),-1==this.gestureEventHandlers[n].indexOf(t)&&this.gestureEventHandlers[n].push(t),this.domElement.addEventListener(n,t,{capture:!1,passive:!0})}}off(e,t){var i=this.parseEventsString(e);1==this.DEBUG&&(console.log("[PointerListener] turning off events: "+e),console.log(this.gestureEventHandlers));for(let e=0;e<i.length;e++){var n,r,a=i[e];a in this.gestureEventHandlers&&(r=(n=this.gestureEventHandlers[a]).indexOf(t),1==this.DEBUG&&console.log(`[PointerListener] turning off ${a}. Index on handlerList: `+r),0<=r&&(n.splice(r,1),this.gestureEventHandlers[a]=n),this.domElement.removeEventListener(a,t,!1))}}destroy(){for(var t in this.gestureEventHandlers){var i=this.gestureEventHandlers[t];for(let e=0;e<i.length;e++){var n=i[e];this.domElement.removeEventListener(t,n)}delete this.gestureEventHandlers[t]}this.removePointerEventListeners(),this.removeTouchEventListeners()}}var Direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1,Directions=$a2188ba8c266b376$export$86ae6e8ac17a67c6,GestureState=$a2188ba8c266b376$export$a1d3109c03b1d511,Geometry=$1f7944f1763e45ce$export$2db6c17465f94a2,PointerListener=$03c52e54621b9b86$export$9371bd96776f4e82,GestureEvent=$f752273e736c5336$export$6e9c3b1e1fa2b597,Tap=$b6ec4e8a6d9d51ec$export$4451a18ddc7083b7,Press=$5653a1f5fdc2db30$export$90610caf6d8d0242,Pan=$7a0f7fd2f33d0212$export$f86166cd6057c2d1,TwoFingerPan=$59226122237c359c$export$8847187e02a498e8,Pinch=$ed7931f1d96d5294$export$826ae541ddf1527b,Rotate=$9fe2bb90b337f66c$export$152db69a76b6b79e;