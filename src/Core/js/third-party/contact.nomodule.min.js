let $a2188ba8c266b376$export$cacd6541cfeeb6c1;!function(e){e.None="0",e.Left="left",e.Right="right",e.Up="up",e.Down="down"}($a2188ba8c266b376$export$cacd6541cfeeb6c1||($a2188ba8c266b376$export$cacd6541cfeeb6c1={}));const $a2188ba8c266b376$export$86ae6e8ac17a67c6=Object.freeze({Horizontal:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right],Vertical:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down],All:[$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up,$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down,$a2188ba8c266b376$export$cacd6541cfeeb6c1.None]});let $a2188ba8c266b376$export$a1d3109c03b1d511,$a2188ba8c266b376$export$b8339a9622c147c0,$a2188ba8c266b376$export$2fb579dd5dfdbea,$d25d2392b002d8dc$export$573b9b62d5ae28f7;!function(e){e.Inactive="inactive",e.Active="active",e.Blocked="blocked"}($a2188ba8c266b376$export$a1d3109c03b1d511||($a2188ba8c266b376$export$a1d3109c03b1d511={})),function(e){e.NoPointer="nopointer",e.SinglePointer="singlepointer",e.DualPointer="dualpointer"}($a2188ba8c266b376$export$b8339a9622c147c0||($a2188ba8c266b376$export$b8339a9622c147c0={})),function(e){e.NoActiveGesture="noactivegesture",e.ActiveGesture="activegesture"}($a2188ba8c266b376$export$2fb579dd5dfdbea||($a2188ba8c266b376$export$2fb579dd5dfdbea={}));class $07c7ab2351895186$export$baf26146a414f24a{constructor(e,t){this.x=e,this.y=t}}class $c0ee1a209fd4fc8d$export$9b781de7bf37bf48{constructor(e,t){this.startPoint=e,this.endPoint=t,this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None,this.deltaX=this.endPoint.x-this.startPoint.x,this.deltaY=this.endPoint.y-this.startPoint.y,this.x=this.deltaX,this.y=this.deltaY,this.vectorLength=Math.sqrt(Math.pow(this.deltaX,2)+Math.pow(this.deltaY,2)),Math.abs(this.deltaX)>Math.abs(this.deltaY)?this.startPoint.x<this.endPoint.x?this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Right:this.startPoint.x>this.endPoint.x&&(this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Left):this.startPoint.y<this.endPoint.y?this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Down:this.startPoint.y>this.endPoint.y&&(this.direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1.Up)}}class $1f7944f1763e45ce$export$2db6c17465f94a2{static getVector(e,t){const n=new $07c7ab2351895186$export$baf26146a414f24a(e.clientX,e.clientY),i=new $07c7ab2351895186$export$baf26146a414f24a(t.clientX,t.clientY);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(n,i)}static getSpeed(e,t,n){let i=0;const o=(n-t)/1e3;return null!=e&&0!=o&&(i=e.vectorLength/o),i}static calculateRotationAngle(e,t){const n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint),i=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint),o=new $07c7ab2351895186$export$baf26146a414f24a(0,0),r=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(n.startPoint,o),a=this.translatePoint(n.endPoint,r),s=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(i.startPoint,o),c=this.translatePoint(i.endPoint,s),l=-1*this.calcAngleRad(a),d=c.x*Math.cos(l)-c.y*Math.sin(l),h=Math.round(c.x*Math.sin(l)+c.y*Math.cos(l));return 180*Math.atan2(h,d)/Math.PI}static calculateVectorAngle(e,t){let n=0;if(e.vectorLength>0&&t.vectorLength>0){const i=(e.x*t.x+e.y*t.y)/(e.vectorLength*t.vectorLength),o=Math.acos(i);n=this.rad2deg(o)}return n}static translatePoint(e,t){const n=e.x+t.x,i=e.y+t.y;return new $07c7ab2351895186$export$baf26146a414f24a(n,i)}static calcAngleDegrees(e){let t=180*Math.atan2(e.y,e.x)/Math.PI;return t<0&&(t=360+t),t}static calcAngleRad(e){let t=Math.atan2(e.y,e.x);return t<0&&(t=2*Math.PI+t),t}static deg2rad(e){return Math.PI/180*e}static rad2deg(e){return e/(Math.PI/180)}static getCenter(e,t){const n=(e.x+t.x)/2,i=(e.y+t.y)/2;return new $07c7ab2351895186$export$baf26146a414f24a(n,i)}static getCenterMovementVector(e,t){const n=this.getCenter(e.startPoint,t.startPoint),i=this.getCenter(e.endPoint,t.endPoint);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(n,i)}static calculateDistanceChange(e,t){const n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint).vectorLength-n.vectorLength}static calculateAbsoluteDistanceChange(e,t){const n=this.calculateDistanceChange(e,t);return Math.abs(n)}static calculateRelativeDistanceChange(e,t){const n=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.startPoint,t.startPoint);return new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(e.endPoint,t.endPoint).vectorLength/n.vectorLength}}!function(e){e.Active="active",e.Removed="removed",e.Canceled="canceled"}($d25d2392b002d8dc$export$573b9b62d5ae28f7||($d25d2392b002d8dc$export$573b9b62d5ae28f7={}));class $d25d2392b002d8dc$export$b56007f12edf0c17{constructor(e,t){this.options={DEBUG:!1,...t},this.DEBUG=this.options.DEBUG;const n=(new Date).getTime();this.pointerId=e.pointerId,this.vectorTimespan=this.options.vectorTimespan??100,this.initialPointerEvent=e,this.currentPointerEvent=e,this.recognizedEvents=[e],this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Active;const i=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(e,e),o={global:{startX:this.initialPointerEvent.clientX,startY:this.initialPointerEvent.clientY,vector:i,deltaX:0,deltaY:0,startTimestampUTC:n,startTimestamp:this.initialPointerEvent.timeStamp,currentTimestamp:this.initialPointerEvent.timeStamp,endTimestamp:null,maximumSpeed:0,currentSpeed:0,distance:0,maximumDistance:0,averageSpeed:0,finalSpeed:0,traveledDistance:0,hasBeenMoved:!1,duration:0},live:{duration:0,speed:0,vector:i,distance:0,isMoving:!1}};this.parameters=o}getTarget(){return this.initialPointerEvent.target}reset(){}onIdle(){const e=(new Date).getTime()-this.parameters.global.startTimestampUTC;this.parameters.global.duration=e}onPointerMove(e){this.parameters.global.hasBeenMoved=!0,this.parameters.live.isMoving=!0,this.update(e)}onPointerUp(e){this.parameters.global.finalSpeed=this.parameters.live.speed,this.parameters.live.speed=0,this.parameters.live.isMoving=!1,this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Removed,this.parameters.global.endTimestamp=e.timeStamp,this.update(e),!0===this.DEBUG&&console.log(`[PointerInput] pointerdown ended. pointerdown duration: ${this.parameters.global.duration}ms`)}onPointerLeave(e){this.onPointerUp(e)}onPointerCancel(e){this.update(e),this.parameters.live.speed=0,this.state=$d25d2392b002d8dc$export$573b9b62d5ae28f7.Canceled,this.parameters.live.isMoving=!1,this.parameters.global.endTimestamp=e.timeStamp,!0===this.DEBUG&&console.log(`[PointerInput] canceled, pointerdown duration:${this.parameters.global.duration}ms`)}update(e){this.currentPointerEvent=e,this.recognizedEvents.push(e);const t=this.getTimedPointerEvents(),n=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(t[0],t[1]);this.parameters.live.vector=n,this.parameters.live.distance=n.vectorLength,this.parameters.live.speed=$1f7944f1763e45ce$export$2db6c17465f94a2.getSpeed(n,t[0].timeStamp,t[1].timeStamp),this.parameters.live.speed>this.parameters.global.maximumSpeed&&(this.parameters.global.maximumSpeed=this.parameters.live.speed),this.parameters.global.currentTimestamp=e.timeStamp,this.parameters.global.duration=e.timeStamp-this.parameters.global.startTimestamp,this.parameters.global.deltaX=n.endPoint.x-this.parameters.global.startX,this.parameters.global.deltaY=n.endPoint.y-this.parameters.global.startY;const i=$1f7944f1763e45ce$export$2db6c17465f94a2.getVector(this.initialPointerEvent,this.currentPointerEvent);this.parameters.global.vector=i,this.parameters.global.distance=i.vectorLength,i.vectorLength>this.parameters.global.maximumDistance&&(this.parameters.global.maximumDistance=i.vectorLength),!0===this.DEBUG&&(console.log(`[PointerInput] current speed: ${this.parameters.live.speed}px/s`),console.log(`[PointerInput] pointerdown duration: ${this.parameters.global.duration}ms`),console.log(`[PointerInput] live vector length within vectorTimespan: ${this.parameters.live.vector.vectorLength}px`))}getTimedPointerEvents(){let e=this.initialPointerEvent;const t=this.recognizedEvents[this.recognizedEvents.length-1];let n=this.recognizedEvents.length-1,i=0;const o=t.timeStamp;for(;i<this.vectorTimespan&&(n-=1,!(n<0));)e=this.recognizedEvents[n],i=o-e.timeStamp;const r=[e,t];return this.recognizedEvents=this.recognizedEvents.slice(-20),r}}class $5fe7e4b452e08fad$export$bbcc47898202c6b8{constructor(e){this.pointer=e,this.parameters=e.parameters}getTarget(){return this.pointer.initialPointerEvent.target}getCurrentPointerEvent(){return this.pointer.currentPointerEvent}getCurrentDirection(){return this.parameters.live.vector.direction}onIdle(){}onPointerMove(e){}onPointerUp(e){}onPointerLeave(e){}onPointerCancel(e){}}const $24f1c062f8ef0b30$var$window=globalThis.window;let $24f1c062f8ef0b30$export$9d2aa32114ab0612;$24f1c062f8ef0b30$export$9d2aa32114ab0612=$24f1c062f8ef0b30$var$window?.CustomEvent?$24f1c062f8ef0b30$var$window.CustomEvent:class extends Event{constructor(e,t){super(e,t),this.detail=t?.detail}initCustomEvent(){throw new Error("Unsupported deprecated method")}};class $f752273e736c5336$export$6e9c3b1e1fa2b597 extends $24f1c062f8ef0b30$export$9d2aa32114ab0612{}class $f752273e736c5336$export$61ce360501d38a6f{constructor(e,t){this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive,this.validPointerManagerState=null,this.validPointerInputConstructor=$5fe7e4b452e08fad$export$bbcc47898202c6b8,this.domElement=e,this.initialPointerEvent=null,this.initialParameters=null,this.activeStateParameters=null,this.options={bubbles:!0,blocks:[],supportedDirections:[],supportedButtons:[],DEBUG:!1,...t},this.DEBUG=this.options.DEBUG}getEmptyGestureParameters(){return{global:{min:{},max:{},boolean:{}},live:{min:{},max:{},boolean:{}}}}getGestureParameters(){let e;if(this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active?(e=this.activeStateParameters,1==this.DEBUG&&(console.log(`[${this.eventBaseName}] validating using activeStateParameters`),console.log(e))):(1==this.DEBUG&&console.log(`[${this.eventBaseName}] validating using initialParameters`),e=this.initialParameters),null==e)throw new Error("[Gesture] no gesture parameters found. Do not call .getGestureParameters on abstract class Gesture");return e}validateGestureParameters(e){const t=this.getGestureParameters();let n,i=!0;for(n in t){const o=t[n],r=e.parameters[n];let a;for(a in o){const e=o[a];let t;for(t in e){const o=e[t],s=r[t];if(1==this.DEBUG&&console.log(`[${this.eventBaseName}] validating ${n} ${a}: required: ${o}, pointer: ${s}`),"boolean"==typeof o&&"boolean"==typeof s?i=this.validateBooleanParameter(o,s):"number"==typeof o&&"number"==typeof s&&(i=this.validateMinMaxParameter(o,s,a)),0==i)return 1==this.DEBUG&&console.log(`[${this.eventBaseName}] invalidated `),!1}}}return!0}validateBooleanParameter(e,t){return null==e||(e==t?(1==this.DEBUG&&console.log(`validated: required value: ${e}, current value: ${t}`),!0):(1==this.DEBUG&&console.log(`dismissing ${this.eventBaseName}: required value: ${e}, current value: ${t}`),!1))}validateMinMaxParameter(e,t,n){if("min"==n){if(t>=e)return!0}else if("max"==n&&t<=e)return!0;return!1}validateDirection(e){const t=e.getCurrentDirection();return!(this.options.supportedDirections.length&&!this.options.supportedDirections.includes(t))||(1==this.DEBUG&&console.log(`[Gestures] dismissing ${this.eventBaseName}: supported directions: ${this.options.supportedDirections}, current direction: ${t}`),!1)}validateGestureState(){return this.state!=$a2188ba8c266b376$export$a1d3109c03b1d511.Blocked}validatePointerManagerState(e){return e.state==this.validPointerManagerState||(1==this.DEBUG&&console.log(`[Gesture] PointerManagerState invalidated ${this.eventBaseName}: ${e.state}`),!1)}validatePointerInputConstructor(e){return e instanceof this.validPointerInputConstructor||(1==this.DEBUG&&console.log(`[Gesture] PointerInputConstructor invalidated ${this.eventBaseName}: ${this.validPointerInputConstructor}`),!1)}validate(e){let t=this.validateGestureState();1==t&&(t=this.validatePointerManagerState(e));const n=e.activePointerInput;return 1==t&&null!=n&&(t=this.validatePointerInputConstructor(n),1==t&&(t=this.validateDirection(n)),1==t&&(t=this.validateGestureParameters(n))),t}recognize(e){const t=this.validate(e);1==t&&this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive&&this.onStart(e),1==t&&this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active?(null==this.initialPointerEvent&&this.setInitialPointerEvent(e),this.emit(e)):this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&0==t?this.onEnd(e):1==this.DEBUG&&console.log(`not firing event ${this.eventBaseName}. No SinglePointerInput found`)}getPointerInput(e){if(1==e.hasPointersOnSurface()&&e.activePointerInput instanceof this.validPointerInputConstructor)return e.activePointerInput;if(e.lastRemovedPointer instanceof $d25d2392b002d8dc$export$b56007f12edf0c17){const t=e.getlastRemovedPointerInput();if(t instanceof this.validPointerInputConstructor)return t}return null}setInitialPointerEvent(e){const t=this.getPointerInput(e);if(t instanceof this.validPointerInputConstructor){const e=t.getCurrentPointerEvent();this.initialPointerEvent=e}}emit(e,t){t=t||this.eventBaseName,!0===this.DEBUG&&console.log(`[Gestures] detected and firing event ${t}`);const n=this.getPointerInput(e);if(null!=n){const i=n.getTarget();if(i instanceof EventTarget){const o=this.getEventData(n,e),r={detail:o,bubbles:this.options.bubbles};!0===this.DEBUG&&console.log(r);const a=new $f752273e736c5336$export$6e9c3b1e1fa2b597(t,r);1==r.bubbles?i.dispatchEvent(a):this.domElement.dispatchEvent(a);const s=o.live.direction;if(1==!!this.options.supportedDirections&&s!=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None&&(t==this.eventBaseName||"swipe"==t))for(let e=0;e<this.options.supportedDirections.length;e++){const n=this.options.supportedDirections[e];if(n==s){const e=t+n;1==this.DEBUG&&console.log(`[Gestures] detected and firing event ${e}`);const o=new $f752273e736c5336$export$6e9c3b1e1fa2b597(e,r);1==r.bubbles?i.dispatchEvent(o):this.domElement.dispatchEvent(o)}}}}}onStart(e){this.blockGestures(),this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Active,this.setInitialPointerEvent(e);const t=`${this.eventBaseName}start`;this.emit(e,t)}onEnd(e){this.unblockGestures(),1==this.DEBUG&&console.log(`[${this.eventBaseName}] ended. Setting ${this.eventBaseName}.state = ${$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive}`),this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive;const t=`${this.eventBaseName}end`;this.emit(e,t)}onTouchStart(e){}onTouchMove(e){}onTouchEnd(e){}onTouchCancel(e){}block(e){-1==this.options.blocks.indexOf(e)&&this.options.blocks.push(e)}unblock(e){-1!=this.options.blocks.indexOf(e)&&this.options.blocks.splice(this.options.blocks.indexOf(e),1)}blockGestures(){for(let e=0;e<this.options.blocks.length;e++){const t=this.options.blocks[e];t.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive&&(0==this.DEBUG&&console.log(`[Gesture] blocking ${t.eventBaseName}`),t.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Blocked)}}unblockGestures(){for(let e=0;e<this.options.blocks.length;e++){this.options.blocks[e].state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive}}getEventData(e,t){throw new Error("Gesture subclasses require a getEventData method()")}}class $e8978caba4d46d00$export$718b85c80185d86e extends $f752273e736c5336$export$61ce360501d38a6f{constructor(e,t){super(e,t),this.initialPointerEvent=null,this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer;const n=this.getEmptyGestureParameters();this.initialParameters={...n},this.activeStateParameters=JSON.parse(JSON.stringify({...n}))}getEventData(e,t){const n=e.parameters.live,i=e.parameters.live;let o=n.vector,r=n.duration;if(null!=this.initialPointerEvent){const t=new $07c7ab2351895186$export$baf26146a414f24a(this.initialPointerEvent.clientX,this.initialPointerEvent.clientY),n=new $07c7ab2351895186$export$baf26146a414f24a(e.pointer.currentPointerEvent.clientX,e.pointer.currentPointerEvent.clientY);o=new $c0ee1a209fd4fc8d$export$9b781de7bf37bf48(t,n),r=e.pointer.currentPointerEvent.timeStamp-this.initialPointerEvent.timeStamp}return{recognizer:this,global:{deltaX:o.x,deltaY:o.y,distance:o.vectorLength,speedX:o.x/r,speedY:o.y/r,speed:o.vectorLength/r,direction:o.direction,scale:1,rotation:0,center:{x:n.vector.endPoint.x,y:n.vector.endPoint.y},srcEvent:e.pointer.currentPointerEvent},live:{deltaX:i.vector.x,deltaY:i.vector.y,distance:i.vector.vectorLength,speedX:i.vector.x/e.pointer.vectorTimespan,speedY:i.vector.y/e.pointer.vectorTimespan,speed:i.speed,direction:i.vector.direction,scale:1,rotation:0,center:{x:i.vector.endPoint.x,y:i.vector.endPoint.y},srcEvent:e.pointer.currentPointerEvent},pointerManager:t}}validateButton(e){if(this.options.supportedButtons.length>0){const t=e.activePointerInput,n=e.lastRemovedPointer;let i=null;if(null!=t?i=t.getCurrentPointerEvent():null!=n&&(i=n.currentPointerEvent),null!=i&&"mouse"==i.pointerType&&-1==this.options.supportedButtons.indexOf(i.buttons))return 1==this.DEBUG&&console.log(`dismissing ${this.eventBaseName}: supportedButtons: ${this.options.supportedButtons.toString()}, poinerEvent.buttons: ${i.buttons}`),!1}return!0}validate(e){let t=this.validateButton(e);return 1==t&&(t=super.validate(e)),t}}class $b6ec4e8a6d9d51ec$export$4451a18ddc7083b7 extends $e8978caba4d46d00$export$718b85c80185d86e{constructor(e,t){super(e,t),this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer,this.eventBaseName="tap";let n=499,i=30,o=30;t&&("maxDuration"in t&&(n=t.maxDuration),"maxDistance"in t&&(i=t.maxDistance,o=t.maxDistance)),this.initialParameters.global.max.duration=n,this.initialParameters.live.max.distance=i,this.initialParameters.global.max.distance=o}validateButton(e){if(this.options.supportedButtons.length>0){const t=e.lastRemovedPointer;if(null!=t){const e=t.currentPointerEvent;if("mouse"==e.pointerType&&-1==this.options.supportedButtons.indexOf(e.button))return 1==this.DEBUG&&console.log(`dismissing ${this.eventBaseName}: supportedButtons: ${this.options.supportedButtons.toString()}, poinerEvent.button: ${e.button}`),!1}}return!0}validate(e){let t=this.validateGestureState();if(1==t&&(t=this.validatePointerManagerState(e)),1==t&&(t=this.validateButton(e)),!0===t){if(1!=e.lastInputSessionPointerCount)return!1;{const n=e.getlastRemovedPointerInput();t=n instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8&&this.validateGestureParameters(n)}}return t}onStart(e){this.setInitialPointerEvent(e),this.emit(e)}}class $5653a1f5fdc2db30$export$90610caf6d8d0242 extends $e8978caba4d46d00$export$718b85c80185d86e{static minDuration=500;constructor(e,t){super(e,t),this.eventBaseName="press";let n=500,i=10,o=20;t&&("minDuration"in t&&(n=t.minDuration),"maxDistance"in t&&(o=t.maxDistance,i=t.maxDistance)),this.initialParameters.global.min.duration=n,this.initialParameters.global.max.distance=i,this.initialParameters.global.max.maximumDistance=o,this.hasBeenEmitted=!1}recognize(e){const t=this.validate(e),n=this.getPointerInput(e),i=this.initialParameters.global.min.duration||$5653a1f5fdc2db30$export$90610caf6d8d0242.minDuration;if(n instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8)if(1==t&&0==this.hasBeenEmitted)this.setInitialPointerEvent(e),this.emit(e),this.hasBeenEmitted=!0,this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Active,this.blockGestures();else if(0==t&&1==this.hasBeenEmitted)this.onEnd(e),this.state=$a2188ba8c266b376$export$a1d3109c03b1d511.Inactive,this.hasBeenEmitted=!1;else{const e=n.parameters.global.duration;1==this.hasBeenEmitted&&e<=i&&(this.hasBeenEmitted=!1)}null==n&&(this.hasBeenEmitted=!1)}}class $7a0f7fd2f33d0212$export$f86166cd6057c2d1 extends $e8978caba4d46d00$export$718b85c80185d86e{constructor(e,t){super(e,t),this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer,this.eventBaseName="pan",this.initialParameters.global.min.duration=0,this.initialParameters.live.min.distance=10,this.initialParameters.global.boolean.hasBeenMoved=!0,this.swipeFinalSpeed=600,this.isSwipe=!1,this.options.supportedDirections=t?.supportedDirections??$a2188ba8c266b376$export$86ae6e8ac17a67c6.All,this.initialSupportedDirections=this.options.supportedDirections}validate(e){this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&(this.options.supportedDirections=$a2188ba8c266b376$export$86ae6e8ac17a67c6.All);return super.validate(e)}onStart(e){this.isSwipe=!1,super.onStart(e)}onEnd(e){const t=e.getlastRemovedPointerInput();t instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8&&(this.swipeFinalSpeed<t.parameters.global.finalSpeed&&t.parameters.live.vector.direction!=$a2188ba8c266b376$export$cacd6541cfeeb6c1.None?(this.isSwipe=!0,this.emit(e,"swipe")):1==this.DEBUG&&(t.parameters.global.finalSpeed<this.swipeFinalSpeed?console.log(`[Pan] dismissing swipe. Final speed: ${t.parameters.global.finalSpeed} < ${this.swipeFinalSpeed}`):console.log(`[Pan] dismissing swipe. Direction: ${t.parameters.live.vector.direction}`))),super.onEnd(e),this.options.supportedDirections=this.initialSupportedDirections}onTouchMove(e){this.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active&&(1==this.DEBUG&&console.log("[Pan] preventing touchmove default"),e.preventDefault(),e.stopPropagation())}}class $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1{constructor(e,t){this.pointerIds=new Set([e.pointerId,t.pointerId]),this.startTimestamp=(new Date).getTime(),this.pointerMap={},this.pointerMap[e.pointerId]=e,this.pointerMap[t.pointerId]=t,this.pointer_1=e,this.pointer_2=t,this.initialPointerEvent=e.initialPointerEvent,this.currentPointerEvent=e.initialPointerEvent;const n=this.pointer_1.parameters.global.vector,i=this.pointer_2.parameters.global.vector,o={duration:0,center:$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(n.startPoint,i.startPoint),centerHasBeenMoved:!1,centerMovementDistance:0,centerMovementVector:$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(n,i),absolutePointerDistanceChange:0,relativePointerDistanceChange:0,rotationAngle:0,absoluteRotationAngle:0,vectorAngle:0,absoluteVectorAngle:0},r=this.pointer_1.parameters.live.vector,a=this.pointer_2.parameters.live.vector,s={global:o,live:{center:$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(r.startPoint,a.startPoint),centerIsMoving:!1,centerMovementDistance:0,centerMovementVector:$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(r,a),absolutePointerDistanceChange:0,relativePointerDistanceChange:0,rotationAngle:0,absoluteRotationAngle:0,vectorAngle:0,absoluteVectorAngle:0}};this.parameters=s}removePointer(e){if(e==this.pointer_1.pointerId)return this.pointer_2;if(e==this.pointer_2.pointerId)return this.pointer_1;throw new Error(`[DualPointerInput] cannot remove Pointer #${e}. The pointer is not part of this DualPointerInput`)}getTarget(){return this.initialPointerEvent.target}update(e){e instanceof PointerEvent&&(this.currentPointerEvent=e);const t=(new Date).getTime();this.parameters.global.duration=t-this.startTimestamp;const n=this.pointer_1.parameters.global.vector,i=this.pointer_2.parameters.global.vector,o=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(n.startPoint,i.startPoint),r=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(n,i),a=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateAbsoluteDistanceChange(n,i),s=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRelativeDistanceChange(n,i),c=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRotationAngle(n,i),l=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateVectorAngle(n,i);this.parameters.global.center=o,this.parameters.global.centerMovementVector=r,this.parameters.global.centerMovementDistance=r.vectorLength,this.parameters.global.absolutePointerDistanceChange=a,this.parameters.global.relativePointerDistanceChange=s,this.parameters.global.rotationAngle=c,this.parameters.global.absoluteRotationAngle=Math.abs(c),this.parameters.global.vectorAngle=l,this.parameters.global.absoluteVectorAngle=Math.abs(l);const d=this.pointer_1.parameters.live.vector,h=this.pointer_2.parameters.live.vector,p=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenter(d.startPoint,h.startPoint),u=$1f7944f1763e45ce$export$2db6c17465f94a2.getCenterMovementVector(d,h),b=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateAbsoluteDistanceChange(d,h),$=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRelativeDistanceChange(d,h),v=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateRotationAngle(d,h),f=$1f7944f1763e45ce$export$2db6c17465f94a2.calculateVectorAngle(d,h);u.vectorLength>0?(this.parameters.live.centerIsMoving=!0,this.parameters.global.centerHasBeenMoved=!0):this.parameters.live.centerIsMoving=!1,this.parameters.live.center=p,this.parameters.live.centerMovementDistance=u.vectorLength,this.parameters.live.centerMovementVector=u,this.parameters.live.absolutePointerDistanceChange=b,this.parameters.live.relativePointerDistanceChange=$,this.parameters.live.rotationAngle=v,this.parameters.live.absoluteRotationAngle=Math.abs(v),this.parameters.live.vectorAngle=f,this.parameters.live.absoluteVectorAngle=Math.abs(f)}onPointerMove(e){this.update(e)}onPointerUp(e){this.update(e)}onPointerLeave(e){this.update(e)}onPointerCancel(e){this.update(e)}onIdle(){this.update()}getCurrentDirection(){return this.parameters.live.centerMovementVector.direction}getCurrentPointerEvent(){return this.currentPointerEvent}}class $a1a4c2869495e604$export$f9d89efe4b7795e7 extends $f752273e736c5336$export$61ce360501d38a6f{constructor(e,t){super(e,t),this.initialPointerEvent_1=null,this.initialPointerEvent_2=null,this.validPointerManagerState=$a2188ba8c266b376$export$b8339a9622c147c0.DualPointer,this.validPointerInputConstructor=$ba0aae203ff6b3f9$export$bdba51b3ce92d5f1;const n=this.getEmptyGestureParameters();this.initialParameters={...n},this.activeStateParameters=JSON.parse(JSON.stringify({...n}))}getEventData(e,t){const n=e.parameters.global,i=e.parameters.live;return{recognizer:this,global:{deltaX:n.centerMovementVector.x,deltaY:n.centerMovementVector.y,distance:n.centerMovementDistance,speedX:n.centerMovementVector.x/n.duration,speedY:n.centerMovementVector.y/n.duration,speed:n.centerMovementVector.vectorLength/n.duration,direction:n.centerMovementVector.direction,scale:n.relativePointerDistanceChange,rotation:n.rotationAngle,center:n.center,srcEvent:e.currentPointerEvent},live:{deltaX:i.centerMovementVector.x,deltaY:i.centerMovementVector.y,distance:i.centerMovementDistance,speedX:i.centerMovementVector.x/n.duration,speedY:i.centerMovementVector.y/n.duration,speed:i.centerMovementVector.vectorLength/n.duration,direction:i.centerMovementVector.direction,scale:i.relativePointerDistanceChange,rotation:i.rotationAngle,center:{x:i.centerMovementVector.startPoint.x,y:i.centerMovementVector.startPoint.y},srcEvent:e.currentPointerEvent},pointerManager:t}}}class $ed7931f1d96d5294$export$826ae541ddf1527b extends $a1a4c2869495e604$export$f9d89efe4b7795e7{constructor(e,t){super(e,t),this.eventBaseName="pinch",this.initialParameters.live.min.centerMovementDistance=0,this.initialParameters.live.max.centerMovementDistance=50,this.initialParameters.live.min.absolutePointerDistanceChange=5,this.initialParameters.live.max.absoluteRotationAngle=20,this.initialParameters.live.min.absoluteVectorAngle=10}}class $9fe2bb90b337f66c$export$152db69a76b6b79e extends $a1a4c2869495e604$export$f9d89efe4b7795e7{constructor(e,t){super(e,t),this.eventBaseName="rotate",this.initialParameters.live.min.centerMovementDistance=0,this.initialParameters.live.max.centerMovementDistance=50,this.initialParameters.live.max.absolutePointerDistanceChange=50,this.initialParameters.live.min.absoluteRotationAngle=5,this.activeStateParameters.live.min.absoluteRotationAngle=0}}class $59226122237c359c$export$8847187e02a498e8 extends $a1a4c2869495e604$export$f9d89efe4b7795e7{constructor(e,t){super(e,t),this.eventBaseName="twofingerpan",this.initialParameters.live.min.centerMovementDistance=10,this.initialParameters.live.max.absolutePointerDistanceChange=50,this.initialParameters.live.max.absoluteVectorAngle=150,this.activeStateParameters.live.min.centerMovementDistance=0}}class $4f5a7b355079efa2$export$af6d1be017a420a{constructor(e){e=e||{},this.options={DEBUG:!1,...e},this.DEBUG=this.options.DEBUG,this.state=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer,this.activePointerInput=null,this.lastRemovedPointer=null,this.lastInputSessionPointerCount=0,this.pointerAllocation={},this.unusedPointers={},this.onSurfacePointers={}}addPointer(e){1==this.DEBUG&&console.log(`[PointerManager] adding Pointer #${e.pointerId.toString()}`);const t={DEBUG:this.DEBUG},n=new $d25d2392b002d8dc$export$b56007f12edf0c17(e,t);this.onSurfacePointers[n.pointerId]=n,null==this.activePointerInput?this.setActiveSinglePointerInput(n):this.activePointerInput instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8?this.setActiveDualPointerInput(this.activePointerInput.pointer,n):this.activePointerInput instanceof $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1&&(this.unusedPointers[n.pointerId]=n),this.lastInputSessionPointerCount=this.currentPointerCount()}removePointer(e){1==this.DEBUG&&(console.log(`[PointerManager] starting to remove Pointer #${e}`),console.log(`[PointerManager] state: ${this.state}`));const t=this.onSurfacePointers[e];if(this.lastRemovedPointer=t,delete this.onSurfacePointers[e],e in this.unusedPointers&&delete this.unusedPointers[e],this.activePointerInput instanceof $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1){if(this.activePointerInput.pointerIds.has(e)){1==this.DEBUG&&console.log(`[PointerManager] removing Pointer #${e} from DualPointerInput`);const t=this.activePointerInput.removePointer(e);this.activePointerInput=null;const n=this.getUnusedPointer();n instanceof $d25d2392b002d8dc$export$b56007f12edf0c17?this.setActiveDualPointerInput(t,n):this.setActiveSinglePointerInput(t)}}else if(this.activePointerInput instanceof $5fe7e4b452e08fad$export$bbcc47898202c6b8){if(1==this.DEBUG&&console.log(`[PointerManager] removing Pointer #${e} from SinglePointerInput`),this.activePointerInput=null,this.state=$a2188ba8c266b376$export$b8339a9622c147c0.NoPointer,Object.keys(this.unusedPointers).length>0)throw this.unusedPointers={},new Error("[PointerManager] found unused Pointers although there should not be any");if(Object.keys(this.onSurfacePointers).length>0)throw this.onSurfacePointers={},new Error("[PointerManager] found onSurfacePointers although there should not be any")}1==this.DEBUG&&console.log(`[PointerManager] state: ${this.state}`)}setActiveSinglePointerInput(e){e.reset();const t=new $5fe7e4b452e08fad$export$bbcc47898202c6b8(e);this.activePointerInput=t,this.pointerAllocation[e.pointerId]=t,delete this.unusedPointers[e.pointerId],this.state=$a2188ba8c266b376$export$b8339a9622c147c0.SinglePointer,1==this.DEBUG&&console.log(`[PointerManager] state: ${this.state}`)}setActiveDualPointerInput(e,t){e.reset(),t.reset();const n=new $ba0aae203ff6b3f9$export$bdba51b3ce92d5f1(e,t);this.activePointerInput=n,this.pointerAllocation[e.pointerId]=n,this.pointerAllocation[t.pointerId]=n,delete this.unusedPointers[e.pointerId],delete this.unusedPointers[t.pointerId],this.state=$a2188ba8c266b376$export$b8339a9622c147c0.DualPointer,1==this.DEBUG&&console.log(`[PointerManager] state: ${this.state}`)}hasPointersOnSurface(){return Object.keys(this.onSurfacePointers).length>0}currentPointerCount(){return Object.keys(this.onSurfacePointers).length}getUnusedPointer(){if(Object.keys(this.unusedPointers).length>0){return Object.values(this.unusedPointers)[0]}return null}getPointerFromId(e){return e in this.onSurfacePointers?this.onSurfacePointers[e]:null}getlastRemovedPointerInput(){return this.lastRemovedPointer instanceof $d25d2392b002d8dc$export$b56007f12edf0c17?this.pointerAllocation[this.lastRemovedPointer.pointerId]:null}onIdle(){for(const e in this.onSurfacePointers){this.onSurfacePointers[e].onIdle()}this.activePointerInput?.onIdle()}onPointerMove(e){const t=this.getPointerFromId(e.pointerId);t instanceof $d25d2392b002d8dc$export$b56007f12edf0c17&&t.onPointerMove(e),this.activePointerInput?.onPointerMove(e)}onPointerUp(e){1==this.DEBUG&&console.log("[PointerManager] pointerup detected");const t=this.getPointerFromId(e.pointerId);t instanceof $d25d2392b002d8dc$export$b56007f12edf0c17&&t.onPointerUp(e),this.activePointerInput?.onPointerUp(e),this.removePointer(e.pointerId)}onPointerCancel(e){1==this.DEBUG&&console.log("[PointerManager] pointercancel detected");const t=this.getPointerFromId(e.pointerId);t instanceof $d25d2392b002d8dc$export$b56007f12edf0c17&&t.onPointerCancel(e),this.activePointerInput?.onPointerCancel(e),this.removePointer(e.pointerId)}}const $03c52e54621b9b86$var$ALL_GESTURE_CLASSES=[$b6ec4e8a6d9d51ec$export$4451a18ddc7083b7,$5653a1f5fdc2db30$export$90610caf6d8d0242,$7a0f7fd2f33d0212$export$f86166cd6057c2d1,$ed7931f1d96d5294$export$826ae541ddf1527b,$9fe2bb90b337f66c$export$152db69a76b6b79e,$59226122237c359c$export$8847187e02a498e8];class $03c52e54621b9b86$export$9371bd96776f4e82{constructor(e,t){this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture,this.activeGestures=[],this.hadActiveGestureDuringCurrentContact=!1,this.gestureEventHandlers={},this.lastRecognitionTimestamp=null,this.idleRecognitionIntervalId=null,this.pointerEventHandlers={},this.touchEventHandlers={},t=t||{},this.options={DEBUG:!1,DEBUG_GESTURES:!1,DEBUG_POINTERMANAGER:!1,bubbles:!0,handleTouchEvents:!0,consecutiveGestures:!0,simultaneousGestures:!0,supportedGestures:[],...t},this.DEBUG=this.options.DEBUG;const n=(t.supportedGestures??$03c52e54621b9b86$var$ALL_GESTURE_CLASSES).map((t=>{if("function"==typeof t){const n={bubbles:this.options.bubbles,DEBUG:this.options.DEBUG_GESTURES};return new t(e,n)}if("object"==typeof t)return t;throw new Error("unsupported gesture type: "+typeof t)}));this.supportedGestures=n,this.domElement=e;const i={DEBUG:this.options.DEBUG_POINTERMANAGER};this.pointerManager=new $4f5a7b355079efa2$export$af6d1be017a420a(i),this.addPointerEventListeners(),this.addTouchEventListeners()}addPointerEventListeners(){const e=this.domElement,t=this.onPointerDown.bind(this),n=this.onPointerMove.bind(this),i=this.onPointerUp.bind(this),o=this.onPointerCancel.bind(this);e.addEventListener("pointerdown",t,{passive:!0}),e.addEventListener("pointermove",n,{passive:!0}),e.addEventListener("pointerup",i,{passive:!0}),e.addEventListener("pointercancel",o,{passive:!0}),this.pointerEventHandlers={pointerdown:t,pointermove:n,pointerup:i,pointercancel:o}}onPointerDown(e){1==this.DEBUG&&console.log("[PointerListener] pointerdown event detected"),(e.target||this.domElement).setPointerCapture(e.pointerId),this.pointerManager.addPointer(e),this.options.pointerdown?.(e,this),null!=this.idleRecognitionIntervalId&&this.clearIdleRecognitionInterval(),this.idleRecognitionIntervalId=setInterval((()=>{this.onIdle()}),100)}onPointerMove(e){1==this.pointerManager.hasPointersOnSurface()&&(this.pointerManager.onPointerMove(e),this.recognizeGestures(),this.options.pointermove?.(e,this))}onPointerUp(e){1==this.DEBUG&&console.log("[PointerListener] pointerup event detected"),this.domElement.releasePointerCapture(e.pointerId),1==this.pointerManager.hasPointersOnSurface()&&(this.pointerManager.onPointerUp(e),this.recognizeGestures(),this.options.pointerup?.(e,this)),this.clearIdleRecognitionInterval()}onPointerCancel(e){this.domElement.releasePointerCapture(e.pointerId),1==this.DEBUG&&console.log("[PointerListener] pointercancel detected"),this.pointerManager.onPointerCancel(e),this.recognizeGestures(),this.clearIdleRecognitionInterval(),this.options.pointercancel?.(e,this)}removePointerEventListeners(){for(const e in this.pointerEventHandlers){const t=this.pointerEventHandlers[e];this.domElement.removeEventListener(e,t)}}addTouchEventListeners(){if(1==this.options.handleTouchEvents){const e=this.onTouchMove.bind(this);this.domElement.addEventListener("touchmove",e),this.touchEventHandlers.touchmove=e}}removeTouchEventListeners(){for(const e in this.touchEventHandlers){const t=this.touchEventHandlers[e];this.domElement.removeEventListener(e,t)}}onTouchMove(e){for(let t=0;t<this.supportedGestures.length;t++){this.supportedGestures[t].onTouchMove(e)}}onIdle(){if(0==this.pointerManager.hasPointersOnSurface())this.clearIdleRecognitionInterval();else{const e=(new Date).getTime();let t=null;null!=this.lastRecognitionTimestamp&&(t=e-this.lastRecognitionTimestamp),(null==t||t>100)&&(this.pointerManager.onIdle(),1==this.DEBUG&&console.log("[PointerListener] onIdle - running idle recognition"),this.recognizeGestures())}}clearIdleRecognitionInterval(){null!=this.idleRecognitionIntervalId&&(clearInterval(this.idleRecognitionIntervalId),this.idleRecognitionIntervalId=null)}recognizeGestures(){this.lastRecognitionTimestamp=(new Date).getTime();let e=this.supportedGestures;0==this.options.simultaneousGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture||0==this.options.consecutiveGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture?e=[this.activeGestures[0]]:0==this.options.consecutiveGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture&&1==this.hadActiveGestureDuringCurrentContact&&1==this.pointerManager.hasPointersOnSurface()&&(e=[]);for(let t=0;t<e.length;t++){const n=e[t];if(n.recognize(this.pointerManager),this.updateActiveGestures(n),0==this.options.simultaneousGestures&&this.state==$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture)break}1==this.DEBUG&&console.log(`[PointerListener] hadActiveGestureDuringCurrentContact: ${this.hadActiveGestureDuringCurrentContact}`),0==this.pointerManager.hasPointersOnSurface()&&(this.hadActiveGestureDuringCurrentContact=!1)}updateActiveGestures(e){if(e.state==$a2188ba8c266b376$export$a1d3109c03b1d511.Active)this.hadActiveGestureDuringCurrentContact=!0,this.activeGestures.indexOf(e)<0&&this.activeGestures.push(e);else{const t=this.activeGestures.indexOf(e);t>=0&&this.activeGestures.splice(t,1)}this.activeGestures.length>0?this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.ActiveGesture:this.state=$a2188ba8c266b376$export$2fb579dd5dfdbea.NoActiveGesture}parseEventsString(e){return e.trim().split(/\s+/g)}on(e,t){const n=this.parseEventsString(e);for(let e=0;e<n.length;e++){const i=n[e];i in this.gestureEventHandlers||(this.gestureEventHandlers[i]=[]),-1==this.gestureEventHandlers[i].indexOf(t)&&this.gestureEventHandlers[i].push(t),this.domElement.addEventListener(i,t,{capture:!1,passive:!0})}}off(e,t){const n=this.parseEventsString(e);1==this.DEBUG&&(console.log(`[PointerListener] turning off events: ${e}`),console.log(this.gestureEventHandlers));for(let e=0;e<n.length;e++){const i=n[e];if(i in this.gestureEventHandlers){const e=this.gestureEventHandlers[i],n=e.indexOf(t);1==this.DEBUG&&console.log(`[PointerListener] turning off ${i}. Index on handlerList: ${n}`),n>=0&&(e.splice(n,1),this.gestureEventHandlers[i]=e),this.domElement.removeEventListener(i,t,!1)}}}destroy(){for(const e in this.gestureEventHandlers){const t=this.gestureEventHandlers[e];for(let n=0;n<t.length;n++){const i=t[n];this.domElement.removeEventListener(e,i)}delete this.gestureEventHandlers[e]}this.removePointerEventListeners(),this.removeTouchEventListeners()}}var Direction=$a2188ba8c266b376$export$cacd6541cfeeb6c1,Directions=$a2188ba8c266b376$export$86ae6e8ac17a67c6,GestureState=$a2188ba8c266b376$export$a1d3109c03b1d511,Geometry=$1f7944f1763e45ce$export$2db6c17465f94a2,PointerListener=$03c52e54621b9b86$export$9371bd96776f4e82,GestureEvent=$f752273e736c5336$export$6e9c3b1e1fa2b597,Tap=$b6ec4e8a6d9d51ec$export$4451a18ddc7083b7,Press=$5653a1f5fdc2db30$export$90610caf6d8d0242,Pan=$7a0f7fd2f33d0212$export$f86166cd6057c2d1,TwoFingerPan=$59226122237c359c$export$8847187e02a498e8,Pinch=$ed7931f1d96d5294$export$826ae541ddf1527b,Rotate=$9fe2bb90b337f66c$export$152db69a76b6b79e;