!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ImageMap=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t="load",n="usemap",r="coords",o=function(){function o(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.selector=e instanceof Array?e:document.querySelectorAll(e),"complete"!==document.readyState?window.addEventListener(t,this.update.bind(this)):this.update(),window.addEventListener("resize",this.debounce(this.update,n).bind(this))}var a,i,u;return a=o,i=[{key:"update",value:function(){for(var e=this.selector,r=0;r<e.length;r++){var o=e[r];if(void 0===o.getAttribute(n))return;var a=o.cloneNode();a.addEventListener(t,this.handleImageLoad(o.offsetWidth,o.offsetHeight)),a.src=o.src}}},{key:"debounce",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];window.clearTimeout(t),t=window.setTimeout((function(t){return e.apply(t,a)}),r,n)}}},{key:"handleImageLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(a){for(var i=a.target.width,u=a.target.height,c=a.target.getAttribute(n).replace(/^#/,""),d=document.querySelectorAll(o.genAreaSelector(c)),l=function(n){var o=d[n],a=(o.dataset[r]=o.dataset[r]||o.getAttribute(r)).split(","),c=a.map((function(n,r){return Number(r%2==0?a[r]/i*e:a[r]/u*t)}));o.setAttribute(r,c.toString())},f=0;f<d.length;f++)l(f)}}}],u=[{key:"genAreaSelector",value:function(e){return'map[name="'.concat(e,'"] area')}}],i&&e(a.prototype,i),u&&e(a,u),o}();function a(e,t){return new o(e,t)}return a.VERSION="2.0.1",a}));